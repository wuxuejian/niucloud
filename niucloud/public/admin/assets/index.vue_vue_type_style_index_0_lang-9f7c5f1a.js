import{d as z,l as G,r as y,a2 as I,h as d,c as m,a as r,b as X,e as l,w as o,Z,u as i,s as U,q as n,i as D,t as V,F as h,T as M,v as O,B as T,bu as P,U as b,a1 as Q,K as W,V as ee,L as le,M as ae,E as te,X as oe}from"./index-34979a7f.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                     *//* empty css                 */import{g as ne}from"./diy-df6f51a6.js";const se=["onClick"],ie={class:"flex items-start"},ue=["onClick"],re={class:"mb-[16px]"},de={class:"mb-[16px]"},pe=r("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/app/pages/index/index",-1),ve=r("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“/”开头，例：https://baidu.com",-1),ce={class:"mb-[16px]"},me={class:"mb-[16px]"},_e=r("div",{class:"text-sm text-gray-400 select-text"},"仅支持小程序之间的跳转，不支持从其他渠道跳转小程序",-1),fe=r("div",{class:"text-sm text-gray-400 select-text"},"小程序路径格式如：app/pages/index/index",-1),xe={class:"mb-[16px]"},ge=r("div",{class:"text-sm text-gray-400 select-text"},"电话号码支持手机号码和固定电话",-1),ye={key:3,class:"flex flex-wrap"},he=["onClick"],be={class:"dialog-footer"},Ae=z({__name:"index",props:{modelValue:{type:Object,default:()=>{}},ignore:{type:Array,default:[]}},emits:["update:modelValue"],setup(Y,{expose:B,emit:C}){const g=Y,v=G({get(){return g.modelValue},set(u){C("update:modelValue",u)}}),_=y(!1),c=y([]),t=y(""),E=y([]),e=y([]),F=()=>{K(()=>{if(v.value.name!=""){e.value=P(v.value),t.value=e.value.parent;for(let u in c.value)c.value[u].name==t.value&&N(c.value[u])}_.value=!0})},K=(u=null)=>{ne({}).then(s=>{if(c.value=s.data,g.ignore&&g.ignore.length){for(let k in c.value)for(let f=0;f<g.ignore.length;f++)if(k==g.ignore[f]){delete c.value[k];break}}E.value=Object.values(c.value)[0].child_list,v.value.name!=""?e.value=P(v.value):e.value={parent:Object.values(c.value)[0].name},t.value=e.value.parent,u&&u()})},N=u=>{E.value=u.child_list,t.value=u.name},j=u=>{delete u.is_share,Object.assign(e.value,u)},H=()=>{v.value={name:"",parent:"",title:"",url:""}},R=()=>{if(t.value==="DIY_LINK"){if(!e.value.title){b({message:n("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){b({message:n("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=t.value,e.value.name=t.value,e.value.action="",delete e.value.appid,delete e.value.mobile}else if(t.value=="DIY_PAGE")e.value.name=t.value,e.value.parent=t.value,e.value.action="decorate",delete e.value.appid,delete e.value.mobile;else if(t.value=="DIY_JUMP_OTHER_APPLET"){if(!e.value.appid){b({message:n("diyAppletIdNotEmpty"),type:"warning"});return}if(!e.value.page){b({message:n("diyAppletPageNotEmpty"),type:"warning"});return}e.value.name=t.value,e.value.parent=t.value,e.value.title="微信小程序-"+e.value.appid,e.value.action="",delete e.value.url,delete e.value.mobile}else if(t.value=="DIY_MAKE_PHONE_CALL"){if(!e.value.mobile){b({message:n("diyMakePhoneNotEmpty"),type:"warning"});return}e.value.name=t.value,e.value.parent=t.value,e.value.title="拨打电话："+e.value.mobile,e.value.action="",delete e.value.url,delete e.value.appid}v.value=P(e.value),_.value=!1,C("success")};return B({showDialog:_}),(u,s)=>{const k=I("Close"),f=Q,$=I("ArrowRight"),x=W,w=ee,p=le,S=ae,A=te,J=oe;return d(),m("div",null,[r("div",{onClick:F},[X(u.$slots,"default",{},()=>[l(x,{modelValue:i(v).title,"onUpdate:modelValue":s[0]||(s[0]=a=>i(v).title=a),placeholder:i(n)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:o(()=>[r("div",{onClick:Z(H,["stop"])},[i(v).name?(d(),U(f,{key:0},{default:o(()=>[l(k)]),_:1})):(d(),U(f,{key:1},{default:o(()=>[l($)]),_:1}))],8,se)]),_:1},8,["modelValue","placeholder"])])]),l(J,{modelValue:_.value,"onUpdate:modelValue":s[7]||(s[7]=a=>_.value=a),title:i(n)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:o(()=>[r("span",be,[l(A,{onClick:s[6]||(s[6]=a=>_.value=!1)},{default:o(()=>[D(V(i(n)("cancel")),1)]),_:1}),l(A,{type:"primary",onClick:R},{default:o(()=>[D(V(i(n)("confirm")),1)]),_:1})])]),default:o(()=>[r("div",ie,[l(w,{class:"w-[140px] border-r h-[350px]"},{default:o(()=>[(d(!0),m(h,null,M(c.value,(a,L)=>(d(),m("div",{key:L,class:O(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[a.name==t.value?"bg-primary-light-9 text-primary":""]]),onClick:q=>N(a)},V(a.title),11,ue))),128))]),_:1}),l(w,{class:"pl-4 h-[350px] flex-1"},{default:o(()=>[l(S,{"label-width":"100px",class:"px-[10px]"},{default:o(()=>[t.value=="DIY_LINK"?(d(),m(h,{key:0},[r("div",re,[l(p,{label:i(n)("diyLinkName")},{default:o(()=>[l(x,{modelValue:e.value.title,"onUpdate:modelValue":s[1]||(s[1]=a=>e.value.title=a),placeholder:i(n)("diyLinkNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",de,[l(p,{label:i(n)("diyLinkUrl")},{default:o(()=>[l(x,{modelValue:e.value.url,"onUpdate:modelValue":s[2]||(s[2]=a=>e.value.url=a),placeholder:i(n)("diyLinkUrlPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[pe]),_:1}),l(p,{label:" "},{default:o(()=>[ve]),_:1})],64)):T("",!0),t.value=="DIY_JUMP_OTHER_APPLET"?(d(),m(h,{key:1},[r("div",ce,[l(p,{label:i(n)("diyAppletId")},{default:o(()=>[l(x,{modelValue:e.value.appid,"onUpdate:modelValue":s[3]||(s[3]=a=>e.value.appid=a),placeholder:i(n)("diyAppletIdPlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",me,[l(p,{label:i(n)("diyAppletPage")},{default:o(()=>[l(x,{modelValue:e.value.page,"onUpdate:modelValue":s[4]||(s[4]=a=>e.value.page=a),placeholder:i(n)("diyAppletPagePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[_e]),_:1}),l(p,{label:" "},{default:o(()=>[fe]),_:1})],64)):T("",!0),t.value=="DIY_MAKE_PHONE_CALL"?(d(),m(h,{key:2},[r("div",xe,[l(p,{label:i(n)("diyMakePhone")},{default:o(()=>[l(x,{modelValue:e.value.mobile,"onUpdate:modelValue":s[5]||(s[5]=a=>e.value.mobile=a),placeholder:i(n)("diyMakePhonePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(p,{label:" "},{default:o(()=>[ge]),_:1})],64)):(d(),m("div",ye,[(d(!0),m(h,null,M(E.value,(a,L)=>(d(),m("div",{key:L,class:O(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[a.name==e.value.name?"border-primary text-primary":""]]),onClick:q=>j(a)},V(a.title),11,he))),128))]))]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{Ae as _};
