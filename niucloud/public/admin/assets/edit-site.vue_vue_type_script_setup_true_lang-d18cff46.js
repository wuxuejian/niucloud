import{d as K,r as _,n as Q,l as I,q as l,Y as X,h as n,s as f,w as s,a as m,e as r,i as h,t as c,u as o,P as L,c as g,F as y,Q as E,A as Y,a6 as H,J as W,K as Z,ak as ee,aI as le,X as ae,aP as te,da as oe,L as re,E as se,a1 as ie,U as de}from"./index-ae2d9b78.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                *//* empty css                       *//* empty css                 *//* empty css                     *//* empty css                  *//* empty css                  *//* empty css                *//* empty css               *//* empty css                  *//* empty css                  */import"./el-form-item-4ed993c7.js";import{_ as ne}from"./member_head-a897263d.js";import{i as ue,j as pe,k as me,m as ce}from"./site-6efacd4c.js";import{a as _e}from"./user-a55a9e95.js";import{g as fe}from"./addon-36ff97ba.js";const ge=m("input",{type:"password",class:"absolute left-[9999px]"},null,-1),we={key:0},ve={class:"flex items-center"},he={class:"flex items-center"},be={key:1,src:ne,alt:"",class:"mr-[10px] w-[24px]"},xe={key:1},Ve={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Pe={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},ye={class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},Ee={class:"dialog-footer"},Qe=K({__name:"edit-site",emits:["complete"],setup(De,{expose:N,emit:S}){const w=_(!1),p=_(!0),b=_([]),D=_([]),q=_([]);_e({}).then(({data:d})=>{D.value=d}).catch();const x=new Date;x.setTime(x.getTime()+3600*1e3*2*360);const k={site_id:"",site_name:"",real_name:"",uid:"",username:"",password:"",confirm_password:"",expire_time:x,site_domain:"",group_id:""},t=Q({...k}),T=_();(async()=>{b.value=await(await ue()).data})();const A=_([]);fe().then(({data:d})=>{A.value=d}).catch();const B=async(d=null)=>{if(p.value=!0,Object.assign(t,k),d){const e=await(await pe(d.site_id)).data;q.value=e,Object.keys(t).forEach(i=>{e[i]!=null&&(t[i]=e[i])})}p.value=!1},F=I(()=>({site_name:[{required:!0,message:l("siteNamePlaceholder"),trigger:"blur"}],group_id:[{required:!0,message:l("groupIdPlaceholder"),trigger:"blur"}],uid:[{validator:(d,e,i)=>{t.uid===""?i(new Error(l("managerPlaceholder"))):i()},trigger:"blur"}],username:[{required:t.uid==0,message:l("usernamePlaceholder"),trigger:"blur"}],password:[{required:t.uid==0,message:l("passwordPlaceholder"),trigger:"blur"}],real_name:[{required:!0,message:l("userRealNamePlaceholder"),trigger:"blur"}],confirm_password:[{required:t.uid==0,message:l("confirmPasswordPlaceholder"),trigger:"blur"},{validator:(d,e,i)=>{t.uid==0&&e!=t.password?i(new Error(l("confirmPasswordError"))):i()},trigger:"blur"}],expire_time:[{required:!0,message:l("expireTimePlaceholder"),trigger:"blur"}]})),C=I(()=>p.value?"":t.site_id?l("editSite"):l("addSite")),R=async d=>{p.value||!d||await d.validate(async e=>{if(e){p.value=!0;const i=t;(i.site_id?me:ce)(i).then(v=>{p.value=!1,w.value=!1,S("complete")}).catch(()=>{p.value=!1})}})};return window.onload=function(){for(var d=document.getElementsByTagName("input"),e=0;e<d.length;e++)d[e].setAttribute("autocomplete","off")},N({showDialog:w,setFormData:B,loading:p}),(d,e)=>{const i=W,u=Z,v=ee,V=le,j=X("Plus"),G=ae,O=te,M=oe,$=re,U=se,z=ie,J=de;return n(),f(z,{modelValue:w.value,"onUpdate:modelValue":e[11]||(e[11]=a=>w.value=a),title:o(C),width:"500px","destroy-on-close":!0},{footer:s(()=>[m("span",Ee,[r(U,{onClick:e[9]||(e[9]=a=>w.value=!1)},{default:s(()=>[h(c(o(l)("cancel")),1)]),_:1}),r(U,{type:"primary",loading:p.value,onClick:e[10]||(e[10]=a=>R(T.value))},{default:s(()=>[h(c(o(l)("confirm")),1)]),_:1},8,["loading"])])]),default:s(()=>[L((n(),f($,{model:t,"label-width":"90px",ref_key:"formRef",ref:T,rules:o(F),class:"page-form",autocomplete:"off"},{default:s(()=>[ge,t.site_id==0?(n(),g("div",we,[r(u,{label:o(l)("siteName"),prop:"site_name"},{default:s(()=>[r(i,{modelValue:t.site_name,"onUpdate:modelValue":e[0]||(e[0]=a=>t.site_name=a),clearable:"",placeholder:o(l)("siteNamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:o(l)("groupId"),prop:"group_id"},{default:s(()=>[r(V,{modelValue:t.group_id,"onUpdate:modelValue":e[1]||(e[1]=a=>t.group_id=a),clearable:"",placeholder:o(l)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),g(y,null,E(b.value,(a,P)=>(n(),f(v,{label:a.group_name,value:a.group_id,key:P},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:o(l)("manager"),prop:"uid"},{default:s(()=>[r(V,{modelValue:t.uid,"onUpdate:modelValue":e[2]||(e[2]=a=>t.uid=a),placeholder:o(l)("managerPlaceholder"),class:"input-width",filterable:""},{default:s(()=>[r(v,{label:o(l)("newAddManager"),value:0},{default:s(()=>[m("div",ve,[r(G,{class:"mr-[10px]"},{default:s(()=>[r(j)]),_:1}),h(" "+c(o(l)("newAddManager")),1)])]),_:1},8,["label"]),(n(!0),g(y,null,E(D.value,a=>(n(),f(v,{key:a.uid,label:a.username,value:a.uid},{default:s(()=>[m("div",he,[a.head_img?(n(),f(O,{key:0,src:o(Y)(a.head_img),size:"small",class:"mr-[10px]"},null,8,["src"])):(n(),g("img",be)),h(" "+c(a.username),1)])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),L(m("div",null,[r(u,{label:o(l)("username"),prop:"username"},{default:s(()=>[r(i,{modelValue:t.username,"onUpdate:modelValue":e[3]||(e[3]=a=>t.username=a),clearable:"",placeholder:o(l)("usernamePlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:o(l)("password"),prop:"password"},{default:s(()=>[r(i,{modelValue:t.password,"onUpdate:modelValue":e[4]||(e[4]=a=>t.password=a),clearable:"",placeholder:o(l)("passwordPlaceholder"),class:"input-width","show-password":!0,type:"password"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(u,{label:o(l)("confirmPassword"),prop:"confirm_password"},{default:s(()=>[r(i,{modelValue:t.confirm_password,"onUpdate:modelValue":e[5]||(e[5]=a=>t.confirm_password=a),placeholder:o(l)("confirmPasswordPlaceholder"),type:"password","show-password":!0,clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])],512),[[H,t.uid===0]])])):(n(),g("div",xe,[r(u,{label:o(l)("siteName")},{default:s(()=>[h(c(t.site_name),1)]),_:1},8,["label"]),r(u,{label:o(l)("groupId"),prop:"group_id"},{default:s(()=>[r(V,{modelValue:t.group_id,"onUpdate:modelValue":e[6]||(e[6]=a=>t.group_id=a),clearable:"",placeholder:o(l)("groupIdPlaceholder"),class:"input-width"},{default:s(()=>[(n(!0),g(y,null,E(b.value,(a,P)=>(n(),f(v,{label:a.group_name,value:a.group_id,key:P},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])])),r(u,{label:o(l)("siteDomain"),prop:"site_domain"},{default:s(()=>[r(i,{modelValue:t.site_domain,"onUpdate:modelValue":e[7]||(e[7]=a=>t.site_domain=a),clearable:"",placeholder:o(l)("siteDomainPlaceholder"),class:"input-width"},null,8,["modelValue","placeholder"]),m("div",null,[m("p",Ve,c(o(l)("siteDomainTips")),1),m("p",Pe,c(o(l)("siteDomainTipsTwo")),1),m("p",ye,c(o(l)("siteDomainTipsThree")),1)])]),_:1},8,["label"]),r(u,{label:o(l)("expireTime"),prop:"expire_time",class:"input-width"},{default:s(()=>[r(M,{class:"flex-1 !flex",modelValue:t.expire_time,"onUpdate:modelValue":e[8]||(e[8]=a=>t.expire_time=a),clearable:"",type:"datetime",placeholder:o(l)("expireTimePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[J,p.value]])]),_:1},8,["modelValue","title"])}}});export{Qe as _};
