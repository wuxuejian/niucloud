import{d as M,r as C,U as z,e2 as he,e3 as xe,q as R,h as c,c as y,e as t,w as o,a as s,t as S,u as e,N as m,bN as N,b2 as ve,d0 as ge,as as Z,e4 as le,e5 as ee,K as G,n as te,dU as we,i as A,ai as ye,a_ as be,cQ as ke,cR as $e,cS as Se,Z as Ee,_ as Ve,$ as Ce,E as re,ad as ie,p as Ie,g as Re,f as O,W as j,e6 as De,dj as ce,v as Ue,I as $,G as H,F as U,B as q,y as oe,cB as se,A as B,dV as Pe,dW as Te,aq as je,ar as Me,Q as J,O as Y,dZ as We,al as qe,d_ as de,ah as ne,s as ue,R as Be,d$ as Fe,Y as Le,d8 as pe,e0 as Ne,a0 as _e,e7 as Ae,dn as ze,b7 as He,J as Oe,a8 as Ke}from"./index-d1ed2ead.js";/* empty css                     *//* empty css                   *//* empty css                  *//* empty css               */import{_ as Qe}from"./el-sub-menu-0de340f7.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-723f0499.js";/* empty css                  *//* empty css                        *//* empty css                 *//* empty css                  */import{_ as X}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                     *//* empty css                         *//* empty css                  *//* empty css                  */import{s as Ze}from"./personal-e16989cf.js";/* empty css                        */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css                        */import{_ as Ge}from"./icon-addon-339e16d0.js";import"./index-e6ce1da3.js";import"./index.vue_vue_type_style_index_0_lang-81bae78b.js";import"./attachment-cb295d3a.js";/* empty css                   *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 *//* empty css                    *//* empty css                   *//* empty css                */const Je={class:"flex"},Ye={class:"setting-item flex items-center justify-between mb-[10px]"},Xe={class:"title text-base text-tx-secondary"},et={class:"setting-item flex items-center justify-between mb-[10px]"},tt={class:"title text-base text-tx-secondary"},ot=M({__name:"layout-setting",setup(d){const _=C(!1),p=z(),u=he(),g=xe(u),l=R({get(){return p.dark},set(x){p.setTheme("dark",x),g(x),ee(p.theme,p.dark?"dark":"light")}}),b=R({get(){return p.theme},set(x){p.setTheme("theme",x),ee(p.theme,p.dark?"dark":"light")}});return(x,n)=>{const v=K,i=ve,V=ge,w=Z,r=le;return c(),y("div",Je,[t(v,{name:"element-Setting",onClick:n[0]||(n[0]=a=>_.value=!0)}),t(r,{modelValue:_.value,"onUpdate:modelValue":n[3]||(n[3]=a=>_.value=a),title:e(m)("layout.layoutSetting"),size:"300px"},{default:o(()=>[t(w,null,{default:o(()=>[s("div",Ye,[s("div",Xe,S(e(m)("layout.darkMode")),1),s("div",null,[t(i,{modelValue:e(l),"onUpdate:modelValue":n[1]||(n[1]=a=>N(l)?l.value=a:null),"active-value":!0,"inactive-value":!1},null,8,["modelValue"])])]),s("div",et,[s("div",tt,S(e(m)("layout.themeColor")),1),s("div",null,[t(V,{modelValue:e(b),"onUpdate:modelValue":n[2]||(n[2]=a=>N(b)?b.value=a:null)},null,8,["modelValue"])])])]),_:1})]),_:1},8,["modelValue","title"])])}}});const st=X(ot,[["__scopeId","data-v-7ae8ee2f"]]),Q=d=>(Ie("data-v-c34a9c1d"),d=d(),Re(),d),nt={class:"userinfo flex h-full items-center"},at={class:"user-name pl-[8px]"},lt=Q(()=>s("div",{class:"flex items-center leading-[1] py-[5px]"},[s("span",{class:"iconfont iconqiehuan ml-[4px] !text-[14px] mr-[10px]"}),s("span",{class:"text-[14px]"},"切换站点")],-1)),rt=Q(()=>s("div",{class:"flex items-center leading-[1] py-[5px]"},[s("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),s("span",{class:"text-[14px]"},"账号设置")],-1)),it=Q(()=>s("div",{class:"flex items-center leading-[1] py-[5px]"},[s("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),s("span",{class:"text-[14px]"},"修改密码")],-1)),ct=Q(()=>s("div",{class:"flex items-center leading-[1] py-[5px]"},[s("span",{class:"iconfont icontuichudenglu ml-[4px] !text-[14px] mr-[10px]"}),s("span",{class:"text-[14px]"},"退出登录")],-1)),dt={class:"form-tip"},ut={class:"dialog-footer"},pt=M({__name:"user-info",setup(d){const _=G(),p=O(),u=r=>{switch(r){case"logout":_.logout();break}},g=()=>{_.logout()},l=r=>{p.push(r)},b=C(null),x=()=>{var r;(r=b.value)==null||r.open()};let n=C(!1);const v=C();let i=te({original_password:"",password:"",password_copy:""});const V=te({original_password:[{required:!0,message:m("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:m("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:m("passwordPlaceholder"),trigger:"blur"}]}),w=r=>{r&&r.validate(a=>{if(a){let f="";if(i.password&&!i.original_password&&(f=m("originalPasswordHint")),i.password&&i.original_password&&!i.password_copy&&(f=m("newPasswordHint")),i.password&&i.original_password&&i.password_copy&&i.password!=i.password_copy&&(f=m("doubleCipherHint")),f){ye({type:"error",message:f});return}Ze(i).then(E=>{n.value=!1})}else return!1})};return(r,a)=>{const f=be,E=K,D=ke,F=$e,W=Se,I=Ee,P=Ve,L=Ce,k=re,T=ie;return c(),y("div",null,[t(W,{onCommand:u,tabindex:1},{dropdown:o(()=>[t(F,null,{default:o(()=>[t(D,{onClick:a[0]||(a[0]=h=>l("/home/index"))},{default:o(()=>[lt]),_:1}),t(D,{onClick:x},{default:o(()=>[rt]),_:1}),t(D,{onClick:a[1]||(a[1]=h=>N(n)?n.value=!0:n=!0)},{default:o(()=>[it]),_:1}),t(D,{onClick:g},{default:o(()=>[ct]),_:1})]),_:1})]),default:o(()=>[s("div",nt,[t(f,{size:25,icon:e(we)},null,8,["icon"]),s("div",at,S(e(_).userInfo.username),1),t(E,{name:"element-ArrowDown",class:"ml-[5px]"})])]),_:1}),t(T,{modelValue:e(n),"onUpdate:modelValue":a[7]||(a[7]=h=>N(n)?n.value=h:n=h),width:"450px",title:"修改密码","before-close":r.handleClose},{footer:o(()=>[s("span",ut,[t(k,{onClick:a[5]||(a[5]=h=>N(n)?n.value=!1:n=!1)},{default:o(()=>[A(S(e(m)("cancel")),1)]),_:1}),t(k,{type:"primary",onClick:a[6]||(a[6]=h=>w(v.value))},{default:o(()=>[A(S(e(m)("save")),1)]),_:1})])]),default:o(()=>[s("div",null,[t(L,{model:e(i),"label-width":"90px",ref_key:"formRef",ref:v,rules:V,class:"page-form"},{default:o(()=>[t(P,{label:e(m)("originalPassword"),prop:"original_password"},{default:o(()=>[t(I,{modelValue:e(i).original_password,"onUpdate:modelValue":a[2]||(a[2]=h=>e(i).original_password=h),type:"password",placeholder:e(m)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),t(P,{label:e(m)("newPassword"),prop:"password"},{default:o(()=>[t(I,{modelValue:e(i).password,"onUpdate:modelValue":a[3]||(a[3]=h=>e(i).password=h),type:"password",placeholder:e(m)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),s("div",dt,S(e(m)("passwordTip")),1)]),_:1},8,["label"]),t(P,{label:e(m)("passwordCopy"),prop:"password_copy"},{default:o(()=>[t(I,{modelValue:e(i).password_copy,"onUpdate:modelValue":a[4]||(a[4]=h=>e(i).password_copy=h),type:"password",placeholder:e(m)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","before-close"]),t(Qe,{ref_key:"userInfoEditRef",ref:b},null,512)])}}});const _t=X(pt,[["__scopeId","data-v-c34a9c1d"]]),mt={class:"left-panel h-full flex items-center"},ft={class:"flex items-center h-full pl-[10px] hidden-xs-only"},ht={class:"right-panel h-full flex items-center justify-end"},xt=["title"],vt=["title"],gt={class:"navbar-item flex items-center h-full cursor-pointer"},wt={class:"navbar-item flex items-center h-full cursor-pointer"},yt={class:"dialog-footer"},bt=M({__name:"index",setup(d){const _=j.get("app_type");De();const p=z(),u=ce(),g=Y(),l=O(),b=C(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth),x=R(()=>p.dark),n=C(!1),v=C(""),i=C("");j.get("comparisonTokenStorage")&&(v.value=j.get("comparisonTokenStorage")),j.get("comparisonSiteIdStorage")&&(i.value=j.get("comparisonSiteIdStorage")),document.addEventListener("visibilitychange",f=>{document.visibilityState==="visible"&&(i.value!=j.get("siteId")||v.value!=j.get("token"))&&(n.value=!0)});const V=()=>{n.value=!1,location.href=`${location.origin}/site/`};Ue(()=>{window.onresize=()=>(()=>{b.value=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth})()});const w=()=>{u.routeRefreshTag&&u.refreshRouterView()},r=R(()=>{const f=g.matched.filter(E=>E.meta.title);return f[0]&&f[0].path=="/"&&f.splice(0,1),f}),a=()=>{const f=l.resolve({path:"/preview/wap",query:{page:"/"}});window.open(f.href)};return(f,E)=>{const D=K,F=Pe,W=Te,I=je,P=Me,L=re,k=ie,T=J;return c(),$(T,{class:B(["h-full px-[10px]",{"layout-header border-b border-color":!e(x)}])},{default:o(()=>[t(P,{class:"w-100 h-full w-full"},{default:o(()=>[t(I,{span:12},{default:o(()=>[s("div",mt,[s("div",{class:"navbar-item flex items-center h-full cursor-pointer",onClick:w},[t(D,{name:"element-Refresh"})]),s("div",ft,[t(W,{separator:"/"},{default:o(()=>[(c(!0),y(U,null,H(e(r),(h,fe)=>(c(),$(F,{key:fe},{default:o(()=>[A(S(h.meta.title),1)]),_:2},1024))),128))]),_:1})])])]),_:1}),t(I,{span:12},{default:o(()=>[s("div",ht,[s("i",{class:"iconfont iconicon_huojian1 cursor-pointer px-[8px]",title:e(m)("visitWap"),onClick:a},null,8,xt),e(_)=="site"?(c(),y("i",{key:0,class:"iconfont iconlingdang-xianxing cursor-pointer px-[8px]",title:e(m)("newInfo")},null,8,vt)):q("",!0),s("div",gt,[t(st)]),s("div",wt,[t(_t)])])]),_:1})]),_:1}),oe(s("input",{type:"hidden","onUpdate:modelValue":E[0]||(E[0]=h=>v.value=h)},null,512),[[se,v.value]]),oe(s("input",{type:"hidden","onUpdate:modelValue":E[1]||(E[1]=h=>i.value=h)},null,512),[[se,i.value]]),t(k,{modelValue:n.value,"onUpdate:modelValue":E[2]||(E[2]=h=>n.value=h),title:e(m)("layout.detectionLoginTip"),width:"30%","close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1},{footer:o(()=>[s("span",yt,[t(L,{onClick:V},{default:o(()=>[A(S(e(m)("layout.detectionLoginOperation")),1)]),_:1})])]),default:o(()=>[s("span",null,S(e(m)("layout.detectionLoginContent")),1)]),_:1},8,["modelValue","title"])]),_:1},8,["class"])}}});const kt=X(bt,[["__scopeId","data-v-8ad74e12"]]),$t={class:B(["ml-[10px]"])},St={key:2,class:"!border-0 !border-t-[1px] border-solid mx-[25px] bg-[#f7f7f7] my-[5px]"},me=M({__name:"menu-item",props:{routes:{type:Object,required:!0}},setup(d){const _=d,p=O(),g=G().siteInfo,l=R(()=>_.routes.meta),b=R(()=>{const x={};return g==null||g.apps.forEach(n=>{x[n.key]=n}),g==null||g.site_addons.forEach(n=>{x[n.key]=n}),x});return(x,n)=>{const v=We,i=qe,V=de;return e(l).show?(c(),y(U,{key:0},[d.routes.children?(c(),$(v,{key:0,index:String(d.routes.name)},{title:o(()=>[s("span",$t,S(e(l).title),1)]),default:o(()=>[(c(!0),y(U,null,H(d.routes.children,(w,r)=>(c(),$(me,{routes:w,key:r},null,8,["routes"]))),128))]),_:1},8,["index"])):(c(),y(U,{key:1},[e(l).addon&&e(l).parent_route&&e(l).parent_route.addon==""?(c(),$(V,{key:0,index:String(d.routes.name),onClick:n[0]||(n[0]=w=>e(p).push({name:d.routes.name}))},{title:o(()=>[t(i,{placement:"right",effect:"light"},{content:o(()=>[A(" 该功能仅限"+S(e(b)[e(l).addon].title)+"使用 ",1)]),default:o(()=>[s("span",{class:B([{"text-[15px]":d.routes.meta.class==1},{"text-[14px]":d.routes.meta.class!=1},{"ml-[10px]":d.routes.meta.class==2,"ml-[15px]":d.routes.meta.class==3}])},S(e(l).title),3)]),_:1})]),_:1},8,["index"])):(c(),$(V,{key:1,index:String(d.routes.name),onClick:n[1]||(n[1]=w=>e(p).push({name:d.routes.name}))},{title:o(()=>[s("span",{class:B([{"text-[15px]":d.routes.meta.class==1},{"text-[14px]":d.routes.meta.class!=1},{"ml-[10px]":d.routes.meta.class==2,"ml-[15px]":d.routes.meta.class==3}])},S(e(l).title),3)]),_:1},8,["index"]))],64)),d.routes.is_border?(c(),y("div",St)):q("",!0)],64)):q("",!0)}}});const Et={class:"w-[124px] px-[8px] bg-[#282c34] h-screen one-menu"},Vt={key:0,class:"logo flex items-center m-auto h-[64px]"},Ct=s("div",{class:"flex justify-center items-center w-full h-[40px]"},[s("img",{class:"max-w-[40px]",src:Ge,alt:"","object-fit":"contain"})],-1),It={key:1,class:"logo flex items-center justify-center h-[64px]"},Rt=s("i",{class:"text-3xl iconfont iconyunkongjian"},null,-1),Dt=[Rt],Ut={key:0,class:"w-[16px] h-[16px] relative flex justify-center"},Pt={key:1,class:"w-[16px] h-[16px]"},Tt={class:"relative flex-1 w-0"},jt={class:"ml-[10px] w-full truncate"},Mt=s("div",{class:"h-[48px]"},null,-1),Wt={class:"w-[140px] h-[64px] flex items-center justify-center text-[16px] border-0 border-b-[1px] border-solid border-[#eee]"},qt=s("div",{class:"h-[48px]"},null,-1),ae=M({__name:"side",setup(d){const _=z(),p=G(),u=Y(),g=O(),l=p.siteInfo,b=p.routers,x=p.addonIndexRoute,n=C([]),v=C([]),i={},V=R(()=>p.siteInfo.icon?p.siteInfo.icon:_.website.icon);if(b.forEach(r=>{r.original_name=r.name,r.meta.addon==""?(r.children&&r.children.length&&(r.name=ne(r.children)),n.value.push(r)):r.meta.addon!=""&&(l==null?void 0:l.apps.length)<=1&&(l==null?void 0:l.apps[0].key)==r.meta.addon?r.children?(r.children.forEach(a=>{a.original_name=a.name,a.children&&a.children.length&&(a.name=ne(a.children))}),n.value.unshift(...r.children)):n.value.unshift(r):i[r.meta.addon]=r}),(l==null?void 0:l.apps.length)>1){const r=[];l==null||l.apps.forEach(a=>{var f;r.push({path:i[a.key]?i[a.key].path:"",meta:{icon:((f=i[a.key])==null?void 0:f.meta.icon)||"element-Setting",addon:a.key,title:a.title,app:a.app,show:!0},original_name:a.key,name:x[a.key]})}),n.value.unshift(...r)}const w=C(u.matched[1].name);return ue(u,()=>{(l==null?void 0:l.apps.length)>1?(v.value=u.matched[1].children,w.value=u.matched[1].name):u.meta.addon==""?(w.value=u.matched[1].name,v.value=u.matched[1].children??[]):u.meta.addon&&u.meta.addon!=(l==null?void 0:l.apps[0].key)?(w.value="/site/app",v.value=u.matched[1].children??[]):(w.value=u.matched[2].name,v.value=u.matched[2].children??[])},{immediate:!0}),(r,a)=>{const f=Le,E=pe,D=K,F=de,W=Ne,I=Z,P=_e,L=J;return c(),$(L,{class:"w-100 h-screen"},{default:o(()=>[t(P,{class:"p-0 flex"},{default:o(()=>[s("div",Et,[t(E,{class:"logo-wrap"},{default:o(()=>[e(_).menuIsCollapse?(c(),y("div",It,Dt)):(c(),y("div",Vt,[t(f,{style:{width:"40px",height:"40px"},src:e(Be)(e(V)),fit:"contain"},{error:o(()=>[Ct]),_:1},8,["src"])]))]),_:1}),t(I,{class:"h-[calc( 100vh - 64px )]"},{default:o(()=>[t(W,{"default-active":w.value,router:!0,class:"aside-menu","unique-opened":"true",collapse:e(_).menuIsCollapse},{default:o(()=>[(c(!0),y(U,null,H(n.value,(k,T)=>(c(),y(U,{key:T},[k.meta.show?(c(),$(F,{key:0,index:k.original_name,onClick:h=>e(g).push({name:k.name})},{title:o(()=>[s("div",Tt,[s("span",jt,S(k.meta.short_title||k.meta.title),1)])]),default:o(()=>[k.meta.icon?(c(),y("div",Ut,[e(Fe)(k.meta.icon)?(c(),$(f,{key:0,class:"w-[16px] h-[16px] rounded-[50%] overflow-hidden",src:k.meta.icon,fit:"fill"},null,8,["src"])):(c(),$(D,{key:1,name:k.meta.icon,class:"absolute top-[50%] -translate-y-[50%]"},null,8,["name"]))])):(c(),y("div",Pt))]),_:2},1032,["index","onClick"])):q("",!0)],64))),128))]),_:1},8,["default-active","collapse"]),Mt]),_:1})]),v.value.length?(c(),$(I,{key:0,class:"two-menu w-[140px]"},{default:o(()=>[s("div",Wt,S(e(u).matched[1].meta.title),1),t(W,{"default-active":e(u).name,router:!0,class:"aside-menu",collapse:e(_).menuIsCollapse},{default:o(()=>[(c(!0),y(U,null,H(v.value,(k,T)=>(c(),$(me,{routes:k,key:T},null,8,["routes"]))),128))]),_:1},8,["default-active","collapse"]),qt]),_:1})):q("",!0)]),_:1})]),_:1})}}});const Bt=M({__name:"index",setup(d){const _=z(),p=R(()=>_.dark),u=Y();return ue(u,()=>{_.$patch(g=>{g.menuDrawer=!1})}),(g,l)=>{const b=Ae,x=le;return c(),y(U,null,[t(b,{class:B(["h-screen layout-aside w-auto",{bright:!e(p)}])},{default:o(()=>[t(ae,{class:"hidden-xs-only"})]),_:1},8,["class"]),t(x,{modelValue:e(_).menuDrawer,"onUpdate:modelValue":l[0]||(l[0]=n=>e(_).menuDrawer=n),direction:"ltr","with-header":!1,"custom-class":"aside-drawer",size:"210px"},{default:o(()=>[t(ae)]),_:1},8,["modelValue"])],64)}}});const Ft={class:"common-layout min-w-[1200px]"},Lt={class:"p-[10px]"},$o=M({__name:"index",setup(d){const _=ce(),p=ze(),u=z();return R(()=>u.dark),(g,l)=>{const b=pe,x=Ke("router-view"),n=Z,v=_e,i=J;return c(),y("div",Ft,[t(i,{class:"w-100 h-screen"},{default:o(()=>[t(Bt),t(i,null,{default:o(()=>[t(b,null,{default:o(()=>[t(kt)]),_:1}),t(v,{class:B(["main-wrap h-full p-0 bg-page"])},{default:o(()=>[t(n,null,{default:o(()=>[s("div",Lt,[e(_).routeRefreshTag?(c(),$(x,{key:0},{default:o(({Component:V,route:w})=>[(c(),$(He,{include:e(p).tabNames},[(c(),$(Oe(V),{key:w.fullPath}))],1032,["include"]))]),_:1})):q("",!0)])]),_:1})]),_:1})]),_:1})]),_:1})])}}});export{$o as default};
