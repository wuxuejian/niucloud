import{d as N,q as V,n as z,s as E,aF as R,h as o,c as s,x as h,u,F as g,a as i,R as y,e as l,I as q,w as x,b as $,G as D,B as G,ad as I}from"./index-d1ed2ead.js";/* empty css                   */import{_ as L}from"./attachment-cb295d3a.js";import{_ as U}from"./index.vue_vue_type_style_index_0_lang-81bae78b.js";import{_ as A}from"./index.vue_vue_type_script_setup_true_lang-723f0499.js";const H={class:"flex flex-wrap"},J={class:"w-full h-full relative flex items-center overflow-hidden rounded"},K=["src"],M={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},O={class:"w-full h-full flex items-center justify-center flex-col"},P={class:"w-full h-full relative flex items-center overflow-hidden rounded"},Q=["src"],T={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},W={class:"w-full h-full flex items-center justify-center flex-col"},le=N({__name:"index",props:{modelValue:{type:String,default:""},width:{type:String,default:"200px"},height:{type:String,default:"100px"},limit:{type:Number,default:1}},emits:["update:modelValue"],setup(r,{emit:S}){const c=r,m=V({get(){return c.modelValue},set(e){S("update:modelValue",e)}}),t=z({data:[]});E(()=>m.value,()=>{t.data=[...m.value.split(",").filter(e=>e)],v()});const p=V(()=>({width:c.width,height:c.height})),w=e=>{c.limit==1?(t.data.splice(0,1),e&&t.data.push(e.url)):e.forEach(a=>{t.data.length<c.limit&&t.data.push(a.url)}),v()},b=(e=0)=>{t.data.splice(e,1),v()},v=()=>{m.value=R(t.data).toString()},d=z({visible:!1,src:""}),C=(e=0)=>{d.visible=!0,d.src=y(t.data[e])};return(e,a)=>{const n=A,k=U,B=L,F=I;return o(),s("div",H,[r.limit==1?(o(),s("div",{key:0,class:"rounded cursor-pointer relative bg-page video-wrap mr-[10px]",style:h(u(p))},[t.data.length?(o(),s(g,{key:0},[i("div",J,[i("video",{src:u(y)(t.data[0]),class:"w-full"},null,8,K),i("div",M,[l(n,{name:"iconfont-icon24gf-playCircle",color:"#fff",size:"25px",onClick:a[0]||(a[0]=f=>C())})])]),l(n,{name:"element-CircleCloseFilled",color:"#bbb",size:"18px",onClick:b,class:"absolute z-[2] top-[-9px] right-[-9px]"})],64)):(o(),q(k,{key:1,limit:r.limit,type:"video",onConfirm:w},{default:x(()=>[i("div",O,[$(e.$slots,"icon",{},()=>[l(n,{name:"iconfont-icon24gf-playCircle",size:"25px",color:"var(--el-text-color-secondary)"})])])]),_:3},8,["limit"]))],4)):(o(),s(g,{key:1},[(o(!0),s(g,null,D(t.data,(f,_)=>(o(),s("div",{class:"rounded cursor-pointer relative bg-page video-wrap mr-[10px]",style:h(u(p)),key:_},[i("div",P,[i("video",{src:u(y)(f),class:"w-full"},null,8,Q),i("div",T,[l(n,{name:"iconfont-icon24gf-playCircle",color:"#fff",size:"25px",onClick:j=>C(_)},null,8,["onClick"])])]),l(n,{name:"element-CircleCloseFilled",color:"#bbb",size:"18px",onClick:j=>b(_),class:"absolute z-[2] top-[-9px] right-[-9px]"},null,8,["onClick"])],4))),128)),t.data.length<r.limit?(o(),s("div",{key:0,class:"rounded cursor-pointer relative bg-page video-wrap mr-[10px]",style:h(u(p))},[l(k,{limit:r.limit,type:"video",onConfirm:w},{default:x(()=>[i("div",W,[$(e.$slots,"icon",{},()=>[l(n,{name:"iconfont-icon24gf-playCircle",size:"25px",color:"var(--el-text-color-secondary)"})])])]),_:3},8,["limit"])],4)):G("",!0)],64)),l(F,{modelValue:d.visible,"onUpdate:modelValue":a[1]||(a[1]=f=>d.visible=f),width:"50%","align-center":"","destroy-on-close":!0,"custom-class":"video-preview"},{default:x(()=>[l(B,{src:d.src,width:"100%"},null,8,["src"])]),_:1},8,["modelValue"])])}}});export{le as _};
