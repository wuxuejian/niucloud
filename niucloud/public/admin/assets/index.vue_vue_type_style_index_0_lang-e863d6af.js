import{d as X,l as Z,r as x,a2 as D,h as d,c as m,a as r,b as Q,e as l,w as o,Z as W,u as s,s as M,q as n,i as O,t as L,F as k,T,v as Y,B,bt as N,U as V,a1 as ee,K as le,V as ae,L as te,M as oe,E as ne,X as se}from"./index-39857e33.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                     *//* empty css                 */import{g as ue}from"./diy-cc74ed2a.js";const ie=["onClick"],re={class:"flex items-start"},de=["onClick"],pe={class:"mb-[16px]"},ce={class:"mb-[16px]"},ve=r("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/app/pages/index/index",-1),me=r("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“http”或“https”开头，例：https://baidu.com",-1),_e={class:"mb-[16px]"},fe={class:"mb-[16px]"},ge=r("div",{class:"text-sm text-gray-400 select-text"},"仅支持小程序之间的跳转，不支持从其他渠道跳转小程序",-1),he=r("div",{class:"text-sm text-gray-400 select-text"},"小程序路径格式如：app/pages/index/index",-1),xe={class:"mb-[16px]"},ye=r("div",{class:"text-sm text-gray-400 select-text"},"电话号码支持手机号码和固定电话",-1),be={key:3,class:"flex flex-wrap"},ke=["onClick"],Ve={class:"dialog-footer"},Ue=X({__name:"index",props:{modelValue:{type:Object,default:()=>{}},ignore:{type:Array,default:[]}},emits:["update:modelValue","confirm","success"],setup(F,{expose:K,emit:y}){const b=F,v=Z({get(){return b.modelValue},set(i){y("update:modelValue",i)}}),_=x(!1),f=x(!1),p=x([]),t=x(""),P=x([]),e=x([]),j=()=>{H(()=>{if(v.value.name!=""){e.value=N(v.value),t.value=e.value.parent;for(let i in p.value)p.value[i].name==t.value&&w(p.value[i])}_.value=!0,f.value=!0,y("confirm",f.value)})},H=(i=null)=>{ue({}).then(u=>{if(p.value=u.data,b.ignore&&b.ignore.length){for(let E in p.value)for(let g=0;g<b.ignore.length;g++)if(E==b.ignore[g]){delete p.value[E];break}}console.log("link",p.value),P.value=Object.values(p.value)[0].child_list,v.value.name!=""?e.value=N(v.value):e.value={parent:Object.values(p.value)[0].name},t.value=e.value.parent,i&&i()})},w=i=>{P.value=i.child_list,t.value=i.name},R=i=>{delete i.is_share,Object.assign(e.value,i)},S=()=>{v.value={name:"",parent:"",title:"",url:""}},$=()=>{if(t.value==="DIY_LINK"){if(!e.value.title){V({message:n("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){V({message:n("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=t.value,e.value.name=t.value,e.value.action="",delete e.value.appid,delete e.value.mobile}else if(t.value=="DIY_PAGE")e.value.name=t.value,e.value.parent=t.value,e.value.action="decorate",delete e.value.appid,delete e.value.mobile;else if(t.value=="DIY_JUMP_OTHER_APPLET"){if(!e.value.appid){V({message:n("diyAppletIdNotEmpty"),type:"warning"});return}if(!e.value.page){V({message:n("diyAppletPageNotEmpty"),type:"warning"});return}e.value.name=t.value,e.value.parent=t.value,e.value.title="微信小程序-"+e.value.appid,e.value.action="",delete e.value.url,delete e.value.mobile}else if(t.value=="DIY_MAKE_PHONE_CALL"){if(!e.value.mobile){V({message:n("diyMakePhoneNotEmpty"),type:"warning"});return}e.value.name=t.value,e.value.parent=t.value,e.value.title="拨打电话："+e.value.mobile,e.value.action="",delete e.value.url,delete e.value.appid}v.value=N(e.value),_.value=!1,f.value=!1,y("confirm",f.value),y("success")},A=()=>{_.value=!1,f.value=!1,y("confirm",f.value)};return K({showDialog:_}),(i,u)=>{const E=D("Close"),g=ee,J=D("ArrowRight"),h=le,I=ae,c=te,q=oe,U=ne,z=se;return d(),m("div",null,[r("div",{onClick:j},[Q(i.$slots,"default",{},()=>[l(h,{modelValue:s(v).title,"onUpdate:modelValue":u[0]||(u[0]=a=>s(v).title=a),placeholder:s(n)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:o(()=>[r("div",{onClick:W(S,["stop"])},[s(v).name?(d(),M(g,{key:0},{default:o(()=>[l(E)]),_:1})):(d(),M(g,{key:1},{default:o(()=>[l(J)]),_:1}))],8,ie)]),_:1},8,["modelValue","placeholder"])])]),l(z,{modelValue:_.value,"onUpdate:modelValue":u[6]||(u[6]=a=>_.value=a),title:s(n)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1,onClose:A},{footer:o(()=>[r("span",Ve,[l(U,{onClick:A},{default:o(()=>[O(L(s(n)("cancel")),1)]),_:1}),l(U,{type:"primary",onClick:$},{default:o(()=>[O(L(s(n)("confirm")),1)]),_:1})])]),default:o(()=>[r("div",re,[l(I,{class:"w-[140px] border-r h-[350px]"},{default:o(()=>[(d(!0),m(k,null,T(p.value,(a,C)=>(d(),m("div",{key:C,class:Y(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[a.name==t.value?"bg-primary-light-9 text-primary":""]]),onClick:G=>w(a)},L(a.title),11,de))),128))]),_:1}),l(I,{class:"pl-4 h-[350px] flex-1"},{default:o(()=>[l(q,{"label-width":"100px",class:"px-[10px]"},{default:o(()=>[t.value=="DIY_LINK"?(d(),m(k,{key:0},[r("div",pe,[l(c,{label:s(n)("diyLinkName")},{default:o(()=>[l(h,{modelValue:e.value.title,"onUpdate:modelValue":u[1]||(u[1]=a=>e.value.title=a),placeholder:s(n)("diyLinkNamePlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",ce,[l(c,{label:s(n)("diyLinkUrl")},{default:o(()=>[l(h,{modelValue:e.value.url,"onUpdate:modelValue":u[2]||(u[2]=a=>e.value.url=a),placeholder:s(n)("diyLinkUrlPlaceholder")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(c,{label:" "},{default:o(()=>[ve]),_:1}),l(c,{label:" "},{default:o(()=>[me]),_:1})],64)):B("",!0),t.value=="DIY_JUMP_OTHER_APPLET"?(d(),m(k,{key:1},[r("div",_e,[l(c,{label:s(n)("diyAppletId")},{default:o(()=>[l(h,{modelValue:e.value.appid,"onUpdate:modelValue":u[3]||(u[3]=a=>e.value.appid=a),placeholder:s(n)("diyAppletIdPlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),r("div",fe,[l(c,{label:s(n)("diyAppletPage")},{default:o(()=>[l(h,{modelValue:e.value.page,"onUpdate:modelValue":u[4]||(u[4]=a=>e.value.page=a),placeholder:s(n)("diyAppletPagePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(c,{label:" "},{default:o(()=>[ge]),_:1}),l(c,{label:" "},{default:o(()=>[he]),_:1})],64)):B("",!0),t.value=="DIY_MAKE_PHONE_CALL"?(d(),m(k,{key:2},[r("div",xe,[l(c,{label:s(n)("diyMakePhone")},{default:o(()=>[l(h,{modelValue:e.value.mobile,"onUpdate:modelValue":u[5]||(u[5]=a=>e.value.mobile=a),placeholder:s(n)("diyMakePhonePlaceholder"),clearable:"",maxlength:"50"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),l(c,{label:" "},{default:o(()=>[ye]),_:1})],64)):(d(),m("div",be,[(d(!0),m(k,null,T(P.value,(a,C)=>(d(),m("div",{key:C,class:Y(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[a.name==e.value.name?"border-primary text-primary":""]]),onClick:G=>R(a)},L(a.title),11,ke))),128))]))]),_:1})]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{Ue as _};
