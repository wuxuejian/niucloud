import{d as O,x as G,f as J,r as y,n as E,q as t,h as i,c as u,a as s,u as a,t as p,P as Q,s as H,w as r,e as l,F as U,Q as W,B as v,i as f,J as X,K as Y,ak as Z,aI as ee,E as oe,az as le,aA as te,a0 as ae,L as ne,a1 as re,U as se}from"./index-ae2d9b78.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                *//* empty css                *//* empty css                       *//* empty css                 *//* empty css                  */import{_ as de}from"./index.vue_vue_type_script_setup_true_lang-657c47c5.js";import{_ as pe}from"./index.vue_vue_type_style_index_0_lang-3e31a6cc.js";import ie from"./index-b111e282.js";/* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import"./el-form-item-4ed993c7.js";import{c as me,d as ue,f as ce}from"./wechat-7913b0c8.js";import _e from"./reply-form-5306600a.js";import{_ as fe}from"./news-card.vue_vue_type_script_setup_true_lang-f526d144.js";/* empty css                */import"./index.vue_vue_type_script_setup_true_lang-57aca5c9.js";import"./index.vue_vue_type_style_index_0_lang-b2ddc674.js";import"./attachment-8d650cb6.js";/* empty css                        *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         */import"./index.vue_vue_type_script_setup_true_lang-43b3de63.js";/* empty css                   */import"./_plugin-vue_export-helper-c27b6911.js";import"./upload-media.vue_vue_type_script_setup_true_lang-7afc0ca7.js";import"./select-wechat-media.vue_vue_type_script_setup_true_lang-bb7ee482.js";const ge={class:"main-container"},ye={class:"detail-head"},ve=s("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),he={class:"ml-[1px]"},xe=s("span",{class:"adorn"},"|",-1),we={class:"right"},Ve={class:"form-tip"},be={class:"flex flex-col"},ke={class:"flex items-center"},Re={key:0,class:"w-[300px] bg-page p-[10px] mr-[10px] mb-[10px] rounded leading-none"},Ce={key:1,class:"w-[300px] bg-page p-[10px] mr-[10px] mb-[10px] rounded"},Ee={key:2,class:"w-[300px] bg-page p-[10px] mr-[10px] mb-[10px] rounded"},Ue={key:3,class:"w-[300px] bg-page p-[10px] mr-[10px] mb-[10px] rounded"},Ne={key:4,class:"w-[300px] bg-page p-[10px] mr-[10px] mb-[10px] rounded"},Pe={class:"mt-[10px]"},$e={class:"fixed-footer-wrap"},Me={class:"fixed-footer"},Be={class:"dialog-footer"},Vo=O({__name:"keyword_reply_edit",setup(De){const V=G(),N=J(),P=V.meta.title,g=y(!1),n=E({id:0,name:"",keyword:"",content:[],matching_type:"full",reply_method:"all"}),h=y({}),b=y(null),$=()=>{var d;(d=b.value)==null||d.verify().then(e=>{e&&(n.content.push(h.value),h.value={},g.value=!1)})},M=d=>{n.content.splice(d,1)},k=y(),B=E({name:[{required:!0,message:t("ruleNamePlaceholder"),trigger:"blur"}],keyword:[{required:!0,message:t("keywordPlaceholder"),trigger:"blur"}],content:[{validator:(d,e,c)=>{n.content.length||c(new Error(t("contentPlaceholder"))),c()},trigger:"blur"}]}),m=y(!1);V.query.id?me(V.query.id).then(({data:d})=>{Object.keys(n).forEach(e=>{d[e]!=null&&(n[e]=d[e])}),m.value=!1}).catch():m.value=!1;const D=async d=>{m.value||!d||await d.validate(async e=>{if(e){const c=n.id?ue:ce;m.value=!0,c(n).then(()=>{m.value=!1}).catch(()=>{m.value=!1})}})};return(d,e)=>{const c=X,x=Y,R=Z,q=ee,F=ie,z=pe,I=de,w=oe,C=le,K=te,L=ae,S=ne,T=re,j=se;return i(),u(U,null,[s("div",ge,[s("div",ye,[s("div",{class:"left",onClick:e[0]||(e[0]=o=>a(N).push({path:"/channel/wechat/reply"}))},[ve,s("span",he,p(a(t)("returnToPreviousPage")),1)]),xe,s("span",we,p(a(P)),1)]),Q((i(),H(S,{model:n,"label-width":"150px",ref_key:"formRef",ref:k,rules:B,class:"page-form"},{default:r(()=>[l(L,{class:"box-card !border-none",shadow:"never"},{default:r(()=>[l(x,{label:a(t)("ruleName"),prop:"name"},{default:r(()=>[l(c,{modelValue:n.name,"onUpdate:modelValue":e[1]||(e[1]=o=>n.name=o),modelModifiers:{trim:!0},placeholder:a(t)("ruleNamePlaceholder"),class:"input-width",clearable:"",maxlength:"60"},null,8,["modelValue","placeholder"]),s("div",Ve,p(a(t)("ruleNameTips")),1)]),_:1},8,["label"]),l(x,{label:a(t)("keyword"),prop:"keyword"},{default:r(()=>[l(c,{modelValue:n.keyword,"onUpdate:modelValue":e[3]||(e[3]=o=>n.keyword=o),modelModifiers:{trim:!0},placeholder:a(t)("keywordPlaceholder"),class:"input-width",clearable:""},{prepend:r(()=>[l(q,{modelValue:n.matching_type,"onUpdate:modelValue":e[2]||(e[2]=o=>n.matching_type=o),placeholder:"Select",style:{width:"115px"}},{default:r(()=>[l(R,{label:a(t)("allMatching"),value:"full"},null,8,["label"]),l(R,{label:a(t)("fuzzyMatching"),value:"like"},null,8,["label"])]),_:1},8,["modelValue"])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(x,{label:a(t)("content"),prop:"content"},{default:r(()=>[s("div",be,[(i(!0),u(U,null,W(n.content,(o,A)=>(i(),u("div",ke,[o.msgtype=="text"?(i(),u("div",Re,p(o.text.content),1)):v("",!0),o.msgtype=="image"?(i(),u("div",Ce,[l(F,{limit:1,width:"120px",height:"120px",modelValue:o.image.url,"onUpdate:modelValue":_=>o.image.url=_},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0),o.msgtype=="video"?(i(),u("div",Ee,[l(z,{limit:1,width:"120px",height:"120px",modelValue:o.video.url,"onUpdate:modelValue":_=>o.video.url=_},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0),o.msgtype=="mpnewsarticle"?(i(),u("div",Ue,[l(fe,{modelValue:o.mpnewsarticle,"onUpdate:modelValue":_=>o.mpnewsarticle=_,mode:"show"},null,8,["modelValue","onUpdate:modelValue"])])):v("",!0),o.msgtype=="miniprogrampage"?(i(),u("div",Ne," 小程序卡片【"+p(o.miniprogrampage.appid)+"】 ",1)):v("",!0),l(I,{name:"element-Delete",class:"cursor-pointer",onClick:_=>M(A)},null,8,["onClick"])]))),256)),s("div",Pe,[l(w,{type:"primary",onClick:e[4]||(e[4]=o=>g.value=!0)},{default:r(()=>[f(p(a(t)("addReplyContent")),1)]),_:1})])])]),_:1},8,["label"]),l(x,{label:a(t)("replyMethod"),prop:"reply_method"},{default:r(()=>[l(K,{modelValue:n.reply_method,"onUpdate:modelValue":e[5]||(e[5]=o=>n.reply_method=o)},{default:r(()=>[l(C,{label:"all"},{default:r(()=>[f(p(a(t)("replyMethodAll")),1)]),_:1}),l(C,{label:"rand"},{default:r(()=>[f(p(a(t)("replyMethodRand")),1)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1},8,["model","rules"])),[[j,m.value]]),s("div",$e,[s("div",Me,[l(w,{type:"primary",loading:m.value,onClick:e[6]||(e[6]=o=>D(k.value))},{default:r(()=>[f(p(a(t)("save")),1)]),_:1},8,["loading"])])])]),l(T,{modelValue:g.value,"onUpdate:modelValue":e[9]||(e[9]=o=>g.value=o),title:a(t)("addReplyContent"),width:"60%","destroy-on-close":!0},{footer:r(()=>[s("span",Be,[l(w,{onClick:e[8]||(e[8]=o=>g.value=!1)},{default:r(()=>[f(p(a(t)("cancel")),1)]),_:1}),l(w,{type:"primary",onClick:$},{default:r(()=>[f(p(a(t)("confirm")),1)]),_:1})])]),default:r(()=>[l(_e,{modelValue:h.value,"onUpdate:modelValue":e[7]||(e[7]=o=>h.value=o),ref_key:"ReplyRef",ref:b},null,8,["modelValue"])]),_:1},8,["modelValue","title"])],64)}}});export{Vo as default};
