import{d as N,j as $,r as x,n as V,q as r,h as z,c as A,e,w as l,br as h,a as t,u as o,cL as H,A as L,t as _,i as E,b3 as M,aI as T,bg as j,a2 as K,bh as X,bi as G,K as J,L as O,M as Q,E as W,X as Y,p as Z,g as oo}from"./index-34979a7f.js";/* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css                    *//* empty css                  *//* empty css                     */import"./el-dropdown-item-4ed993c7.js";import{_ as eo}from"./index.vue_vue_type_script_setup_true_lang-e10327f5.js";/* empty css                  */import{s as so}from"./personal-b1aada71.js";import{_ as to}from"./index.vue_vue_type_script_setup_true_lang-633427cd.js";/* empty css                        */import{_ as ao}from"./_plugin-vue_export-helper-c27b6911.js";import"./index-0da618fa.js";/* empty css                        */import"./index.vue_vue_type_style_index_0_lang-645eb1b7.js";import"./attachment-0daaf0f6.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-d47218dc.js";/* empty css               *//* empty css                  *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    */import"./index.vue_vue_type_script_setup_true_lang-0998f18f.js";/* empty css                   */import"./sortable.esm-be94e56d.js";const f=c=>(Z("data-v-e84ff266"),c=c(),oo(),c),lo={class:"userinfo flex h-full items-center"},ro={class:"user-name pl-[8px]"},no=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconshezhi1 ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"账号设置")],-1)),po=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconshouquanxinxi2 ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"授权信息")],-1)),io=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont iconxiugai ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"修改密码")],-1)),mo=f(()=>t("div",{class:"flex items-center leading-[1] py-[5px]"},[t("span",{class:"iconfont icontuichudenglu ml-[4px] !text-[14px] mr-[10px]"}),t("span",{class:"text-[14px]"},"退出登录")],-1)),co={class:"form-tip"},uo={class:"dialog-footer"},_o=N({__name:"user-info",setup(c){const m=$(),k=i=>{switch(i){case"logout":m.logout();break}},P=()=>{m.logout()},v=x(null),C=()=>{var i;(i=v.value)==null||i.open()};let n=x(!1);const y=x();let s=V({original_password:"",password:"",password_copy:""});const D=V({original_password:[{required:!0,message:r("originalPasswordPlaceholder"),trigger:"blur"}],password:[{required:!0,message:r("passwordPlaceholder"),trigger:"blur"}],password_copy:[{required:!0,message:r("passwordPlaceholder"),trigger:"blur"}]}),U=i=>{i&&i.validate(a=>{if(a){let d="";if(s.password&&!s.original_password&&(d=r("originalPasswordHint")),s.password&&s.original_password&&!s.password_copy&&(d=r("newPasswordHint")),s.password&&s.original_password&&s.password_copy&&s.password!=s.password_copy&&(d=r("doubleCipherHint")),d){M({type:"error",message:d});return}so(s).then(b=>{n.value=!1})}else return!1})};return(i,a)=>{const d=T,b=eo,u=j,R=K("router-link"),S=X,q=G,w=J,g=O,B=Q,I=W,F=Y;return z(),A("div",null,[e(q,{onCommand:k,tabindex:1},{dropdown:l(()=>[e(S,null,{default:l(()=>[e(u,{onClick:C},{default:l(()=>[no]),_:1}),e(u,null,{default:l(()=>[e(R,{to:"/tools/authorize"},{default:l(()=>[po]),_:1})]),_:1}),e(u,{onClick:a[0]||(a[0]=p=>h(n)?n.value=!0:n=!0)},{default:l(()=>[io]),_:1}),e(u,{onClick:P},{default:l(()=>[mo]),_:1})]),_:1})]),default:l(()=>[t("div",lo,[e(d,{size:25,icon:o(H),src:o(m).userInfo.head_img?o(L)(o(m).userInfo.head_img):""},null,8,["icon","src"]),t("div",ro,_(o(m).userInfo.username),1),e(b,{name:"element ArrowDown",class:"ml-[5px]"})])]),_:1}),e(F,{modelValue:o(n),"onUpdate:modelValue":a[6]||(a[6]=p=>h(n)?n.value=p:n=p),width:"450px",title:"修改密码"},{footer:l(()=>[t("span",uo,[e(I,{onClick:a[4]||(a[4]=p=>h(n)?n.value=!1:n=!1)},{default:l(()=>[E(_(o(r)("cancel")),1)]),_:1}),e(I,{type:"primary",onClick:a[5]||(a[5]=p=>U(y.value))},{default:l(()=>[E(_(o(r)("save")),1)]),_:1})])]),default:l(()=>[t("div",null,[e(B,{model:o(s),"label-width":"90px",ref_key:"formRef",ref:y,rules:D,class:"page-form"},{default:l(()=>[e(g,{label:o(r)("originalPassword"),prop:"original_password"},{default:l(()=>[e(w,{modelValue:o(s).original_password,"onUpdate:modelValue":a[1]||(a[1]=p=>o(s).original_password=p),type:"password",placeholder:o(r)("originalPasswordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),e(g,{label:o(r)("newPassword"),prop:"password"},{default:l(()=>[e(w,{modelValue:o(s).password,"onUpdate:modelValue":a[2]||(a[2]=p=>o(s).password=p),type:"password",placeholder:o(r)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"]),t("div",co,_(o(r)("passwordTip")),1)]),_:1},8,["label"]),e(g,{label:o(r)("passwordCopy"),prop:"password_copy"},{default:l(()=>[e(w,{modelValue:o(s).password_copy,"onUpdate:modelValue":a[3]||(a[3]=p=>o(s).password_copy=p),type:"password",placeholder:o(r)("passwordPlaceholder"),clearable:"",class:"input-width"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])])]),_:1},8,["modelValue"]),e(to,{ref_key:"userInfoEditRef",ref:v},null,512)])}}});const Oo=ao(_o,[["__scopeId","data-v-e84ff266"]]);export{Oo as default};
