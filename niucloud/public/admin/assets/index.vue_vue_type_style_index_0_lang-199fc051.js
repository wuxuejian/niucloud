import{d as z,l as G,r as g,Y as D,h as c,c as m,a as p,b as J,e as t,w as o,V as Q,u as r,s as U,q as i,i as B,t as y,F as L,Q as P,v as S,c_ as C,R as A,X,J as H,S as W,K as Z,E as ee,a1 as le}from"./index-ae2d9b78.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./el-form-item-4ed993c7.js";/* empty css                     *//* empty css                 *//* empty css                */import{g as ae}from"./diy-14ac5c3d.js";const te=["onClick"],oe={class:"flex items-start"},ne=["onClick"],se={class:"mb-[16px]"},re={class:"mb-[16px]"},ie=p("div",{class:"text-sm text-gray-400 select-text"},"路径必须以“/”开头，例：/app/pages/index/index",-1),ue=p("div",{class:"text-sm text-gray-400 select-text"},"跳转外部链接“/”开头，例：https://baidu.com",-1),de={key:1,class:"flex flex-wrap"},ce=["onClick"],pe={class:"dialog-footer"},be=z({__name:"index",props:{modelValue:{type:String,default:""},ignore:{type:Array,default:[]}},emits:["update:modelValue"],setup(F,{expose:Y,emit:w}){const f=F,u=G({get(){return f.modelValue},set(a){w("update:modelValue",a)}}),v=g(!1),d=g([]),s=g(""),k=g([]),e=g([]),$=()=>{j(()=>{if(u.value.name!=""){e.value=C(u.value),s.value=e.value.parent;for(let a in d.value)d.value[a].name==s.value&&E(d.value[a])}v.value=!0})},j=(a=null)=>{ae({}).then(n=>{if(d.value=n.data,f.ignore&&f.ignore.length){for(let h in d.value)for(let _=0;_<f.ignore.length;_++)if(h==f.ignore[_]){delete d.value[h];break}}k.value=Object.values(d.value)[0].child_list,u.value.name!=""?e.value=C(u.value):e.value={parent:Object.values(d.value)[0].name},s.value=e.value.parent,a&&a()})},E=a=>{k.value=a.child_list,s.value=a.name},K=a=>{delete a.is_share,Object.assign(e.value,a)},O=()=>{u.value={name:"",parent:"",title:"",url:""}},R=()=>{if(s.value==="DIY_LINK"){if(!e.value.title){A({message:i("diyLinkNameNotEmpty"),type:"warning"});return}if(!e.value.url){A({message:i("diyLinkUrlNotEmpty"),type:"warning"});return}e.value.parent=s.value,e.value.name=s.value,e.value.action=""}else s.value=="DIY_PAGE"&&(e.value.parent=s.value,e.value.action="decorate");u.value=C(e.value),v.value=!1,w("success")};return Y({showDialog:v}),(a,n)=>{const h=D("Close"),_=X,M=D("ArrowRight"),b=H,N=W,x=Z,I=ee,T=le;return c(),m("div",null,[p("div",{onClick:$},[J(a.$slots,"default",{},()=>[t(b,{modelValue:r(u).title,"onUpdate:modelValue":n[0]||(n[0]=l=>r(u).title=l),placeholder:r(i)("linkPlaceholder"),readonly:"",class:"link-input"},{suffix:o(()=>[p("div",{onClick:Q(O,["stop"])},[r(u).name?(c(),U(_,{key:0},{default:o(()=>[t(h)]),_:1})):(c(),U(_,{key:1},{default:o(()=>[t(M)]),_:1}))],8,te)]),_:1},8,["modelValue","placeholder"])])]),t(T,{modelValue:v.value,"onUpdate:modelValue":n[4]||(n[4]=l=>v.value=l),title:r(i)("selectLinkTips"),width:"40%","close-on-press-escape":!1,"destroy-on-close":!0,"close-on-click-modal":!1},{footer:o(()=>[p("span",pe,[t(I,{onClick:n[3]||(n[3]=l=>v.value=!1)},{default:o(()=>[B(y(r(i)("cancel")),1)]),_:1}),t(I,{type:"primary",onClick:R},{default:o(()=>[B(y(r(i)("confirm")),1)]),_:1})])]),default:o(()=>[p("div",oe,[t(N,{class:"w-[140px] border-r h-[350px]"},{default:o(()=>[(c(!0),m(L,null,P(d.value,(l,V)=>(c(),m("div",{key:V,class:S(["h-[40px] leading-[40px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==s.value?"bg-primary-light-9 text-primary":""]]),onClick:q=>E(l)},y(l.title),11,ne))),128))]),_:1}),t(N,{class:"pl-4 h-[350px] flex-1"},{default:o(()=>[s.value=="DIY_LINK"?(c(),m(L,{key:0},[p("div",se,[t(x,{label:r(i)("diyLinkName")},{default:o(()=>[t(b,{modelValue:e.value.title,"onUpdate:modelValue":n[1]||(n[1]=l=>e.value.title=l),placeholder:r(i)("diyLinkNamePlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),p("div",re,[t(x,{label:r(i)("diyLinkUrl")},{default:o(()=>[t(b,{modelValue:e.value.url,"onUpdate:modelValue":n[2]||(n[2]=l=>e.value.url=l),placeholder:r(i)("diyLinkUrlPlaceholder"),class:"w-6/12"},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),t(x,{label:" "},{default:o(()=>[ie]),_:1}),t(x,{label:" "},{default:o(()=>[ue]),_:1})],64)):(c(),m("div",de,[(c(!0),m(L,null,P(k.value,(l,V)=>(c(),m("div",{key:V,class:S(["border border-br rounded-[3px] mr-[10px] mb-[10px] px-4 h-[32px] leading-[32px] cursor-pointer hover:bg-primary-light-9 px-[10px] hover:text-primary",[l.name==e.value.name?"border-primary text-primary":""]]),onClick:q=>K(l)},y(l.title),11,ce))),128))]))]),_:1})])]),_:1},8,["modelValue","title"])])}}});export{be as _};
