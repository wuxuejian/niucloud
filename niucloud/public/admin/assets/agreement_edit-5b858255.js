import{d as R,O as $,f as q,r as y,dn as I,n as P,q as S,N as r,h as k,c as T,a as l,u as a,t as p,y as j,I as O,w as m,e as s,i as x,dp as U,dq as A,Z as M,_ as z,$ as L,ac as Z,E as G,a4 as H}from"./index-022827e1.js";/* empty css                   *//* empty css                  *//* empty css                *//* empty css                     */import{_ as J}from"./index.vue_vue_type_script_setup_true_lang-e1e9fcc0.js";/* empty css                 */import"./index.vue_vue_type_style_index_0_lang-3b291a1c.js";/* empty css                   */import"./attachment-b3c743b5.js";/* empty css                        *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    *//* empty css                 */import"./el-tooltip-4ed993c7.js";/* empty css                 *//* empty css               *//* empty css                    *//* empty css                         *//* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-f0968e2c.js";/* empty css                */import"./_plugin-vue_export-helper-c27b6911.js";const K={class:"main-container"},Q={class:"detail-head"},W=l("span",{class:"iconfont iconxiangzuojiantou !text-xs"},null,-1),X={class:"ml-[1px]"},Y=l("span",{class:"adorn"},"|",-1),ee={class:"right"},te={class:"fixed-footer-wrap"},ae={class:"fixed-footer"},qe=R({__name:"agreement_edit",setup(oe){const u=$(),_=q(),f=u.query.key||"",i=y(!1),V=I(),w=u.meta.title,g={agreement_key:"",content:"",title:"",agreement_key_name:""},t=P({...g});i.value=!0,f&&(async(d="")=>{Object.assign(t,g);const e=await(await U(d)).data;Object.keys(t).forEach(o=>{e[o]!=null&&(t[o]=e[o])}),i.value=!1})(f);const v=y(),E=S(()=>({title:[{required:!0,message:r("titlePlaceholder"),trigger:"blur"}]})),C=async d=>{i.value||!d||await d.validate(async e=>{if(e){i.value=!0;const o=t;o.key=t.agreement_key,A(o).then(c=>{i.value=!1,b()}).catch(()=>{i.value=!1})}})},b=()=>{V.removeTab(u.path),_.push({path:"/setting/agreement"})};return(d,e)=>{const o=M,c=z,D=J,B=L,F=Z,h=G,N=H;return k(),T("div",K,[l("div",Q,[l("div",{class:"left",onClick:e[0]||(e[0]=n=>a(_).push({path:"/setting/agreement"}))},[W,l("span",X,p(a(r)("returnToPreviousPage")),1)]),Y,l("span",ee,p(a(w)),1)]),j((k(),O(F,{class:"box-card !border-none",shadow:"never"},{default:m(()=>[s(B,{model:t,"label-width":"90px",ref_key:"formRef",ref:v,rules:a(E),class:"page-form"},{default:m(()=>[s(c,{label:a(r)("type")},{default:m(()=>[s(o,{modelValue:t.agreement_key_name,"onUpdate:modelValue":e[1]||(e[1]=n=>t.agreement_key_name=n),modelModifiers:{trim:!0},readonly:"",class:"input-width"},null,8,["modelValue"])]),_:1},8,["label"]),s(c,{label:a(r)("title"),prop:"title"},{default:m(()=>[s(o,{modelValue:t.title,"onUpdate:modelValue":e[2]||(e[2]=n=>t.title=n),modelModifiers:{trim:!0},clearable:"",placeholder:a(r)("titlePlaceholder"),class:"input-width",maxlength:"20"},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(c,{label:a(r)("content")},{default:m(()=>[s(D,{modelValue:t.content,"onUpdate:modelValue":e[3]||(e[3]=n=>t.content=n)},null,8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])]),_:1})),[[N,i.value]]),l("div",te,[l("div",ae,[s(h,{type:"primary",onClick:e[4]||(e[4]=n=>C(v.value))},{default:m(()=>[x(p(a(r)("save")),1)]),_:1}),s(h,{onClick:e[5]||(e[5]=n=>b())},{default:m(()=>[x(p(a(r)("cancel")),1)]),_:1})])])])}}});export{qe as default};
