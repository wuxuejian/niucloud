import{d as C,r as g,n as h,N as r,h as x,c as N,y as B,I as F,w as i,e as s,a as f,t as _,u as n,cL as I,i as D,W as M,X as $,_ as R,Y as L,E as P,$ as k}from"./index-efa627c5.js";/* empty css                   *//* empty css                  *//* empty css                     *//* empty css                *//* empty css                 */import{L as H,M as S}from"./member-1a4f1a79.js";import{_ as T}from"./_plugin-vue_export-helper-c27b6911.js";const U={class:"main-container"},j={class:"panel-title"},q={class:"form-tip"},z={class:"text-lg"},A={class:"fixed-footer-wrap"},K={class:"fixed-footer"},O=C({__name:"member",setup(W){const d=g(!0),p=g({}),v=g(""),b=h({prefix:[{validator:(o,e,l)=>{e&&!/^[a-zA-Z]*$/g.test(e)?l(new Error(r("prefixHint"))):l()},trigger:"blur"}],length:[{required:!0,message:r("lengthPlaceholder"),trigger:["blur","change"]},{validator:(o,e,l)=>{parseInt(e)>30||parseInt(e)-t.prefix.length<4?l(new Error(r("lengthHint"))):l()},trigger:"blur"}]}),t=h({prefix:"",length:10});(async()=>{const o=await(await H()).data;Object.keys(t).forEach(e=>{o[e]!=null&&(t[e]=o[e])}),u(p.value),d.value=!1})();const u=async o=>{await o.validate(e=>{if(e){let l="";const m=t.length-t.prefix.length-1;for(let c=1;c<=m;c++)l+="0";v.value=t.prefix+l+"1"}})},w=async o=>{d.value||!o||await o.validate(e=>{e&&S(t).then(()=>{d.value=!1,u()}).catch(()=>{d.value=!1})})};return(o,e)=>{const l=M,m=$,c=R,y=L,V=P,E=k;return x(),N("div",U,[B((x(),F(y,{model:t,"label-width":"150px",ref_key:"ruleFormRef",ref:p,rules:b,class:"page-form"},{default:i(()=>[s(c,{class:"box-card !border-none",shadow:"never"},{default:i(()=>[f("h3",j,_(n(r)("memberNoRule")),1),s(m,{label:n(r)("prefix"),prop:"prefix"},{default:i(()=>[s(l,{modelValue:t.prefix,"onUpdate:modelValue":e[0]||(e[0]=a=>t.prefix=a),placeholder:n(r)("prefixPlaceholder"),class:"input-width",clearable:"",maxlength:"20",onChange:e[1]||(e[1]=a=>u(p.value))},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),s(m,{label:n(r)("length"),prop:"length"},{default:i(()=>[s(l,{modelValue:t.length,"onUpdate:modelValue":e[2]||(e[2]=a=>t.length=a),modelModifiers:{trim:!0},placeholder:n(r)("lengthPlaceholder"),class:"input-width",clearable:"",onKeyup:e[3]||(e[3]=a=>n(I)(a)),onChange:e[4]||(e[4]=a=>u(p.value)),onBlur:e[5]||(e[5]=a=>t.length=a.target.value)},null,8,["modelValue","placeholder"]),f("div",q,_(n(r)("lengthTips")),1)]),_:1},8,["label"]),s(m,null,{default:i(()=>[f("div",z,_(v.value),1)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[E,d.value]]),f("div",A,[f("div",K,[s(V,{type:"primary",onClick:e[6]||(e[6]=a=>w(p.value))},{default:i(()=>[D(_(n(r)("save")),1)]),_:1})])])])}}});const ae=T(O,[["__scopeId","data-v-5ec83867"]]);export{ae as default};
