import{d as k,r as f,l as F,q as l,Q as q,h as d,s as v,w as a,a as x,e as s,i as g,t as p,u as r,R as P,c as C,F as R,T as I,B as M,aa as T,aB as O,L as Z,K as $,M as j,E as K,X as Q,Y as X}from"./index-34979a7f.js";/* empty css                   *//* empty css                  *//* empty css                   *//* empty css                  *//* empty css                     *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  */import{e as Y,a as z,b as A}from"./user-6b2d33a6.js";const H={key:0,class:"text-[12px] text-[#a9a9a9] leading-normal mt-[5px]"},J={class:"dialog-footer"},pe=k({__name:"create-site-limit",props:{siteGroup:{type:Object,default:()=>({})},uid:{type:Number,default:0}},emits:["complete"],setup(w,{expose:y,emit:L}){const c=w,u=f(!1),b=f(null),t=f({id:0,uid:c.uid,group_id:"",num:1,month:1}),m=f(!1),S=F(()=>({group_id:[{required:!0,message:l("siteGroupPlaceholder"),trigger:"blur"}],num:[{required:!0,message:l("numPlaceholder"),trigger:"blur"},{validator:(i,e,n)=>{e<=0&&n(l("numCannotLtZero")),n()}}],month:[{required:!0,message:l("monthPlaceholder"),trigger:"blur"},{validator:(i,e,n)=>{e<=0&&n(l("monthCannotLtZero")),n()}}]})),E=async i=>{m.value||!i||await i.validate(async e=>{e&&(m.value=!0,(t.value.id?Y:z)(t.value).then(()=>{m.value=!1,u.value=!1,L("complete")}).catch(()=>{m.value=!1}))})},B=(i=0)=>{i?A(i).then(({data:e})=>{t.value=e,u.value=!0}):u.value=!0};return q(()=>u.value,()=>{u.value||(t.value={id:0,uid:c.uid,group_id:"",num:1,month:1})}),y({setFormData:B,loading:m}),(i,e)=>{const n=T,N=O,_=Z,h=$,U=j,V=K,D=Q,G=X;return d(),v(D,{modelValue:u.value,"onUpdate:modelValue":e[5]||(e[5]=o=>u.value=o),title:r(l)("userCreateSiteLimit"),width:"700px","destroy-on-close":!0},{footer:a(()=>[x("span",J,[s(V,{onClick:e[3]||(e[3]=o=>u.value=!1)},{default:a(()=>[g(p(r(l)("cancel")),1)]),_:1}),s(V,{type:"primary",loading:m.value,onClick:e[4]||(e[4]=o=>E(b.value))},{default:a(()=>[g(p(r(l)("confirm")),1)]),_:1},8,["loading"])])]),default:a(()=>[P((d(),v(U,{model:t.value,"label-width":"130px",ref_key:"formRef",ref:b,rules:r(S),class:"page-form",autocomplete:"off"},{default:a(()=>[s(_,{label:r(l)("siteGroup"),prop:"group_id"},{default:a(()=>[s(N,{modelValue:t.value.group_id,"onUpdate:modelValue":e[0]||(e[0]=o=>t.value.group_id=o),placeholder:r(l)("siteGroupPlaceholder"),disabled:t.value.id},{default:a(()=>[(d(!0),C(R,null,I(c.siteGroup,o=>(d(),v(n,{label:o.group_name,value:o.group_id},null,8,["label","value"]))),256))]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label"]),s(_,{label:r(l)("createSiteNum"),prop:"num"},{default:a(()=>[x("div",null,[s(h,{modelValue:t.value.num,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.num=o),modelModifiers:{number:!0},class:"!w-[150px]"},null,8,["modelValue"]),t.value.group_id?(d(),C("p",H,p(r(l)("createdSiteNum"))+"ï¼š"+p(c.siteGroup[t.value.group_id].site_num),1)):M("",!0)])]),_:1},8,["label"]),s(_,{label:r(l)("createSiteTimeLimit"),prop:"month"},{default:a(()=>[s(h,{modelValue:t.value.month,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.month=o),modelModifiers:{number:!0},class:"!w-[150px]"},{append:a(()=>[g(p(r(l)("month")),1)]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[G,m.value]])]),_:1},8,["modelValue","title"])}}});export{pe as _};
