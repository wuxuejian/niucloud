import{d as P,l as j,n as g,Q as Z,r as B,aJ as q,a$ as E,h as i,c as s,a as o,v as A,$ as _,u as r,e as l,A as v,s as T,w as D,t as L,q as N,F as h,T as M,B as O,J as Q,bk as G,an as R}from"./index-34979a7f.js";/* empty css                        */import{_ as H}from"./index.vue_vue_type_style_index_0_lang-645eb1b7.js";import{_ as K}from"./index.vue_vue_type_script_setup_true_lang-e10327f5.js";/* empty css                 */import{S as U}from"./sortable.esm-be94e56d.js";import{_ as W}from"./_plugin-vue_export-helper-c27b6911.js";/* empty css                  *//* empty css                   *//* empty css                  */import"./attachment-0daaf0f6.js";/* empty css                   */import"./index.vue_vue_type_script_setup_true_lang-d47218dc.js";/* empty css                     *//* empty css                 *//* empty css               *//* empty css                  *//* empty css                  *//* empty css                     *//* empty css                  *//* empty css                      *//* empty css                    */import"./el-tooltip-4ed993c7.js";/* empty css               *//* empty css                    *//* empty css                    */import"./el-dropdown-item-4ed993c7.js";import"./index.vue_vue_type_script_setup_true_lang-0998f18f.js";/* empty css                   */const X={class:"flex flex-wrap"},Y={key:0,class:"w-full h-full relative"},ee={class:"w-full h-full flex items-center justify-center"},te={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},oe={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},ae={class:"leading-none text-xs mt-[10px] text-secondary"},ie={class:"w-full h-full relative"},le={class:"w-full h-full flex items-center justify-center"},ne={class:"absolute z-[1] flex items-center justify-center w-full h-full inset-0 bg-black bg-opacity-60 operation"},re={class:"w-full h-full flex items-center justify-center flex-col content-wrap"},se={class:"leading-none text-xs mt-[10px] text-secondary"},ce=P({__name:"index",props:{type:{type:String,default:"image"},modelValue:{type:String,default:""},width:{type:String,default:"100px"},height:{type:String,default:"100px"},imageText:{type:String},limit:{type:Number,default:1}},emits:["update:modelValue","change"],setup(a,{emit:y}){const c=a,d=j({get(){return c.modelValue},set(e){y("update:modelValue",e)}}),t=g({data:[]});let w=g([]);const f=()=>{d.value=R(t.data).toString(),w=R(t.data).map(e=>e.indexOf("data:image")!=-1?e:v(e))};Z(()=>d.value,()=>{d.value.indexOf("data:image")!=-1?t.data=[d.value]:t.data=[...d.value.split(",").filter(e=>e)],f()},{immediate:!0});const x=j(()=>({width:c.width,height:c.height})),k=e=>{c.limit==1?(t.data.splice(0,1),e&&t.data.push(e.url)):(e.forEach(n=>{t.data.length<c.limit&&t.data.push(n.url)}),E(()=>{I()})),f(),y("change",d.value)},b=(e=0)=>{t.data.splice(e,1),f()},u=g({show:!1,index:0}),C=(e=0)=>{u.show=!0,u.index=e},z=B(null);q(()=>{E(()=>{I()})}),B([]);const I=()=>{c.limit!=1&&U.create(z.value,{group:"image-wrap",animation:300,onEnd:e=>{const n=t.data[e.oldIndex];t.data.splice(e.oldIndex,1),t.data.splice(e.newIndex,0,n),f()}})};return(e,n)=>{const S=Q,m=K,V=H,F=G;return i(),s(h,null,[o("div",X,[a.limit==1?(i(),s("div",{key:0,class:A(["rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",{"rounded-full":a.type=="avatar"}]),style:_(r(x))},[t.data.length?(i(),s("div",Y,[o("div",ee,[l(S,{src:t.data[0].indexOf("data:image")!=-1?t.data[0]:r(v)(t.data[0]),fit:a.type=="avatar"?"none":"contain"},null,8,["src","fit"])]),o("div",te,[l(m,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:n[0]||(n[0]=p=>C())}),l(m,{name:"element Delete",color:"#fff",size:"18px",onClick:b})])])):(i(),T(V,{key:1,limit:a.limit,onConfirm:k},{default:D(()=>[o("div",oe,[l(m,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),o("div",ae,L(a.imageText||r(N)("upload.root")),1)])]),_:1},8,["limit"]))],6)):(i(),s(h,{key:1},[o("div",{class:"flex flex-wrap",ref_key:"imgListRef",ref:z},[(i(!0),s(h,null,M(t.data,(p,$)=>(i(),s("div",{class:"rounded cursor-pointer overflow-hidden relative border border-solid border-color image-wrap mr-[10px]",style:_(r(x)),key:p},[o("div",ie,[o("div",le,[l(S,{src:r(v)(p),fit:"contain"},null,8,["src"])]),o("div",ne,[l(m,{name:"element ZoomIn",color:"#fff",size:"18px",class:"mr-[10px]",onClick:J=>C($)},null,8,["onClick"]),l(m,{name:"element Delete",color:"#fff",size:"18px",onClick:J=>b($)},null,8,["onClick"])])])],4))),128))],512),t.data.length<a.limit?(i(),s("div",{key:0,class:"rounded cursor-pointer overflow-hidden relative border border-dashed border-color",style:_(r(x))},[l(V,{limit:a.limit,onConfirm:k},{default:D(()=>[o("div",re,[l(m,{name:"element Plus",size:"20px",color:"var(--el-text-color-secondary)"}),o("div",se,L(a.imageText||r(N)("upload.root")),1)])]),_:1},8,["limit"])],4)):O("",!0)],64))]),u.show?(i(),T(F,{key:0,"url-list":r(w),onClose:n[1]||(n[1]=p=>u.show=!1),"initial-index":u.index,"zoom-rate":1},null,8,["url-list","initial-index"])):O("",!0)],64)}}});const Fe=W(ce,[["__scopeId","data-v-4faf9942"]]);export{Fe as default};
