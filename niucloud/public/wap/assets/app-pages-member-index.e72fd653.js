import{d as a,r as e,u as l,a as o,c as t,o as r,b as g,g as p,A as s,e as u,f as i,s as n,h as d,i as m,j as v,w as b,k as c,l as f,v as h,m as x,n as S,p as y,q as C,t as _,x as j,y as B}from"./index-87ab774c.js";import{_ as k}from"./u-loading-page.7f46a889.js";import{d as $,f as E}from"./index.4e2771ca.js";import{_ as w}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.387770c2.js";import"./u-transition.ec8f5bea.js";import"./u-icon.e07e714b.js";import"./u-avatar.a0079c97.js";import"./u-popup.3478eb27.js";import"./u-safe-bottom.da624f42.js";import"./u-parse.a0210f06.js";import"./u-tabbar.334a266f.js";const D=w(a({__name:"index",setup(a){const w=e(!0),D=l(),M=e(0);let R=e(!1);const T=e(0),A=e("DIY_MEMBER_INDEX"),I=e(""),G=o({pageMode:"diy",title:"",global:{},value:[]}),H=t((()=>"decorate"==D.mode?D:G));r((a=>{D.mode=a.mode||"","decorate"==D.mode&&(w.value=!1),T.value=a.id||"",I.value=a.template||""})),g((()=>{"decorate"==D.mode?D.init():p({id:T.value,name:A.value,template:I.value}).then((a=>{let e=a.data;if(e.value){G.pageMode=e.mode,G.title=e.title;let a=JSON.parse(e.value);G.global=a.global,G.value=a.value,G.value.forEach(((a,e)=>{a.pageStyle="",a.pageStartBgColor&&(a.pageStartBgColor&&a.pageEndBgColor?a.pageStyle+=`background:linear-gradient(${a.pageGradientAngle},${a.pageStartBgColor},${a.pageEndBgColor});`:a.pageStyle+="background-color:"+a.pageStartBgColor+";"),a.margin&&(a.pageStyle+="padding-top:"+2*a.margin.top+"rpx;",a.pageStyle+="padding-bottom:"+2*a.margin.bottom+"rpx;",a.pageStyle+="padding-right:"+2*a.margin.both+"rpx;",a.pageStyle+="padding-left:"+2*a.margin.both+"rpx;")})),R.value=G.value.some((a=>a&&a.position&&"top_fixed"==a.position)),s({title:G.title})}else e.page&&u({url:e.page});w.value=!1}))}));const N=t((()=>{var a="";return H.value.global.pageStartBgColor&&H.value.global.pageEndBgColor?a+=`background:linear-gradient(${H.value.global.pageGradientAngle},${H.value.global.pageStartBgColor},${H.value.global.pageEndBgColor});`:a+="background-color:"+H.value.global.pageStartBgColor+";",a+="min-height:calc(100vh - 50px);",H.value.global.bgUrl&&(a+=`background-image:url('${B(H.value.global.bgUrl)}');`),H.value.global.bgHeightScale&&(a+=`background-size: 100% ${H.value.global.bgHeightScale}%;`),a}));return i((()=>{M.value++,n()})),d((a=>{a.scrollTop>0&&(D.scrollTop=a.scrollTop)})),(a,e)=>{const l=C(_("u-loading-page"),k),o=j;return m(),v(o,{style:y(a.themeColor())},{default:b((()=>[c(l,{loading:w.value,loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),f(c(o,null,{default:b((()=>[x(" 自定义模板渲染 "),"fixed"!=S(H).pageMode?(m(),v(o,{key:0,class:"diy-template-wrap bg-index",style:y(S(N))},{default:b((()=>[c($,{data:S(H),pullDownRefreshCount:M.value},null,8,["data","pullDownRefreshCount"])])),_:1},8,["style"])):x("v-if",!0),x(" 固定模板渲染 "),"fixed"==S(H).pageMode?(m(),v(o,{key:1,class:"fixed-template-wrap"},{default:b((()=>[c(E,{data:S(H),pullDownRefreshCount:M.value},null,8,["data","pullDownRefreshCount"])])),_:1})):x("v-if",!0)])),_:1},512),[[h,!w.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-ec33bad7"]]);export{D as default};
