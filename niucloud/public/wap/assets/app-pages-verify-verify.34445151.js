import{d as e,r as l,j as a,af as t,a2 as s,S as r,a3 as n,o as u,c as o,w as d,u as p,P as i,b as f,R as c,Q as x,D as m,E as v,f as _,n as g,a as y,i as b,F as h,g as j,h as k,a0 as w,X as C}from"./index-000ef0fb.js";import{_ as F}from"./u-loading-page.41f97929.js";import{g as T,a as E,v as R}from"./verify.06868c24.js";import"./u-loading-icon.d02ed416.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.3ad24640.js";const S=e({__name:"verify",setup(e){const S=l(!0);l(null);let z=l("");a((e=>{if(e.code&&(z.value=e.code),e.scene){let l=decodeURIComponent(e.scene);l=l.split("&"),l.length&&l.forEach((e=>{-1!=e.indexOf("code")&&(z.value=e.split("-")[1])}))}})),t((()=>{s()&&(D(),O())}));const D=()=>{T().then((e=>{e.data?S.value=!1:(r({title:"非核销员无此权限",icon:"none"}),setTimeout((()=>{n()}),1e3))}))};let I=l({});const O=()=>{S.value=!0,E(z.value).then((e=>{I.value=e.data,S.value=!1}))};let P=!1;const Q=()=>{if(P)return!1;P=!0,R(z.value).then((e=>{P=!1,setTimeout((()=>{y({url:"/app/pages/verify/index",param:{},mode:"redirectTo"})}),1e3)})).catch((()=>{P=!1}))};return(e,l)=>{const a=C,t=b,s=h,r=j(k("u-loading-page"),F);return u(),o(t,{style:g(e.themeColor()),class:"bg-[#f8f8f8] min-h-[100vh] overflow-hidden"},{default:d((()=>[!S.value&&p(I)&&p(I).value?(u(),i(c,{key:0},[f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[(u(!0),i(c,null,x(p(I).value.list,((e,l)=>(u(),o(t,{class:"py-[10rpx] flex",key:l},{default:d((()=>[e.cover?(u(),o(a,{key:0,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:p(w)(e.cover)},null,8,["src"])):(u(),o(a,{key:1,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:p(w)("addon/tourism/tourism/member/hotel.png")},null,8,["src"])),f(t,{class:"flex flex-col flex-1 ml-[10rpx]"},{default:d((()=>[f(t,{class:"multi-hidden leading-[1.2]"},{default:d((()=>[m(v(e.name),1)])),_:2},1024),f(t,{class:"ml-auto text-[#999]"},{default:d((()=>[m("x1")])),_:1})])),_:2},1024)])),_:2},1024)))),128))])),_:1}),f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m("核销信息")])),_:1}),f(t,{class:"text-[28rpx]"},{default:d((()=>[f(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m("核销类型")])),_:1}),f(t,null,{default:d((()=>[m(v(p(I).type_name),1)])),_:1})])),_:1}),(u(!0),i(c,null,x(p(I).value.content.fixed,((e,l)=>(u(),o(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),(u(!0),i(c,null,x(p(I).value.content.diy,((e,l)=>(u(),o(t,{key:l,class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,{class:"text-[28rpx]"},{default:d((()=>[(u(!0),i(c,null,x(e.list,((e,l)=>(u(),o(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between",key:l},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128)),f(s,{class:"bg-[var(--primary-color)] text-[#fff] mx-[20rpx] mt-[60rpx] h-[80rpx] flex items-center justify-center !text-[28rpx] rounded-[10rpx]",onClick:Q},{default:d((()=>[m("核销")])),_:1})],64)):_("v-if",!0),f(r,{loading:S.value,"loading-text":"",loadingColor:"var(--primary-color)",iconSize:"35"},null,8,["loading"])])),_:1},8,["style"])}}});export{S as default};
