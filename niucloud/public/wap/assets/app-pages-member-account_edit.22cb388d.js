import{d as e,r as a,J as l,I as o,j as t,aa as r,o as n,c,w as d,b as u,T as s,E as m,F as p,u as i,V as b,f,n as _,bl as h,bm as x,a as y,bk as g,i as k,g as v,h as V,P as j,ad as P,L as T}from"./index-d5155418.js";import{_ as A}from"./u-input.1d1c60d2.js";import{_ as C,a as N}from"./u-form.86e10f26.js";import{_ as R}from"./u-modal.bebc0c9a.js";import"./u-icon.0f8fe390.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.d7569bea.js";import"./u-loading-icon.15e9cfe2.js";import"./u-popup.51692bc0.js";import"./u-transition.b7ca8cae.js";import"./u-safe-bottom.e620f640.js";const w=e({__name:"account_edit",setup(e){const w=a(!1),M=a(null),U=a("get"),z=a(!1),q=l({account_id:0,account_type:"bank",bank_name:"",realname:"",account_no:""}),B=o((()=>({realname:{type:"string",required:!0,message:"bank"==q.account_type?T("bankRealnamePlaceholder"):T("alipayRealnamePlaceholder"),trigger:["blur","change"]},bank_name:{type:"string",required:"bank"==q.account_type,message:T("bankNamePlaceholder"),trigger:["blur","change"]},account_no:{type:"string",required:!0,message:"bank"==q.account_type?T("bankAccountNoPlaceholder"):T("alipayAccountNoPlaceholder"),trigger:["blur","change"]}})));t((e=>{e.type&&(q.account_type=e.type),e.mode&&(U.value=e.mode),e.id&&(q.account_id=e.id,r({account_id:e.id}).then((e=>{e.data&&Object.keys(q).forEach((a=>{null!=e.data[a]&&(q[a]=e.data[a])}))})))}));const S=()=>{const e=q.account_id?h:x;M.value.validate().then((()=>{w.value||(w.value=!0,e(q).then((e=>{"get"==U.value?y({url:"/app/pages/member/account",param:{type:q.account_type,mode:U.value}}):y({url:"/app/pages/member/apply_cash_out",param:{account_id:q.account_id?q.account_id:e.data.id,type:q.account_type},mode:"redirectTo"})})).catch((()=>{w.value=!1})))}))},E=()=>{g(q.account_id).then((()=>{y({url:"/app/pages/member/account",mode:"redirectTo"})}))};return(e,a)=>{const l=k,o=v(V("u-input"),A),t=v(V("u-form-item"),C),r=v(V("u-form"),N),h=j,x=P,y=v(V("u-modal"),R);return n(),c(l,{style:_(e.themeColor())},{default:d((()=>[u(x,{"scroll-y":"true",class:"w-screen h-screen bg-page"},{default:d((()=>[u(l,{class:"h-[20rpx]"}),u(l,{class:"p-[30rpx] bg-white sidebar-marign rounded"},{default:d((()=>["bank"==q.account_type?(n(),s(b,{key:0},[u(l,{class:"text-center text-base font-bold mt-[50rpx]"},{default:d((()=>[m(p(i(T)("addBankCard")),1)])),_:1}),u(l,{class:"text-center text-sm mt-[10rpx]"},{default:d((()=>[m(p(i(T)("addBankCardTips")),1)])),_:1}),u(l,{class:"mt-[50rpx]"},{default:d((()=>[u(r,{labelPosition:"left",model:q,"label-style":{"font-size":"28rpx"},labelWidth:"200rpx",errorType:"toast",rules:i(B),ref_key:"formRef",ref:M},{default:d((()=>[u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(t,{label:i(T)("bankRealname"),prop:"realname","border-bottom":!0},{default:d((()=>[u(o,{modelValue:q.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>q.realname=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:i(T)("bankRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(t,{label:i(T)("bankName"),prop:"bank_name","border-bottom":!0},{default:d((()=>[u(o,{modelValue:q.bank_name,"onUpdate:modelValue":a[1]||(a[1]=e=>q.bank_name=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:i(T)("bankNamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(t,{label:i(T)("bankAccountNo"),prop:"account_no","border-bottom":!0},{default:d((()=>[u(o,{modelValue:q.account_no,"onUpdate:modelValue":a[2]||(a[2]=e=>q.account_no=e),modelModifiers:{trim:!0},fontSize:"28rpx",maxlength:"30",border:"none",clearable:"",placeholder:i(T)("bankAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):f("v-if",!0),"alipay"==q.account_type?(n(),s(b,{key:1},[u(l,{class:"text-center text-base font-bold mt-[50rpx]"},{default:d((()=>[m(p(i(T)("addAlipayAccount")),1)])),_:1}),u(l,{class:"text-center text-sm mt-[10rpx]"},{default:d((()=>[m(p(i(T)("addAlipayAccountTips")),1)])),_:1}),u(l,{class:"mt-[50rpx]"},{default:d((()=>[u(r,{labelPosition:"left",model:q,labelWidth:"200rpx",errorType:"toast",rules:i(B),ref_key:"formRef",ref:M},{default:d((()=>[u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(t,{label:i(T)("alipayRealname"),prop:"realname","border-bottom":!0},{default:d((()=>[u(o,{modelValue:q.realname,"onUpdate:modelValue":a[3]||(a[3]=e=>q.realname=e),modelModifiers:{trim:!0},maxlength:"30",border:"none",clearable:"",placeholder:i(T)("alipayRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(t,{label:i(T)("alipayAccountNo"),prop:"account_no","border-bottom":!0},{default:d((()=>[u(o,{modelValue:q.account_no,"onUpdate:modelValue":a[4]||(a[4]=e=>q.account_no=e),modelModifiers:{trim:!0},border:"none",maxlength:"30",clearable:"",placeholder:i(T)("alipayAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):f("v-if",!0),u(l,{class:"mt-[100rpx]"},{default:d((()=>[u(h,{loading:w.value,class:"bg-[var(--primary-color)] text-[#fff] h-[80rpx] leading-[80rpx] rounded-[100rpx] text-[28rpx]",onClick:S},{default:d((()=>[m(p(i(T)("save")),1)])),_:1},8,["loading"])])),_:1})])),_:1})])),_:1}),u(y,{show:z.value,content:i(T)("deleteConfirm"),confirmText:i(T)("confirm"),cancelText:i(T)("cancel"),showCancelButton:!0,onConfirm:E,onCancel:a[5]||(a[5]=e=>z.value=!1),confirmColor:"var(--primary-color)"},null,8,["show","content","confirmText","cancelText"])])),_:1},8,["style"])}}});export{w as default};
