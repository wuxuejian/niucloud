import{d as e,r as a,I as l,H as t,j as o,ab as r,o as n,c,w as d,b as u,O as s,D as m,E as p,u as i,Q as b,f as _,n as f,be as h,bf as y,a as x,bg as g,i as k,g as v,h as V,ae as j,J as P}from"./index-f0b22e55.js";import{_ as A}from"./u-input.68cc217f.js";import{_ as T,a as C}from"./u-form.64047760.js";import{_ as N}from"./u-button.6c9286f5.js";import{_ as R}from"./u-modal.95552ce7.js";import"./u-icon.e73c62d6.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.3e9a753b.js";import"./u-loading-icon.c77adce6.js";import"./u-popup.d2722f83.js";import"./u-transition.95f24654.js";import"./u-safe-bottom.cdc7d17c.js";const w=e({__name:"account_edit",setup(e){const w=a(!1),M=a(null),U=a("get"),q=a(!1),B=l({account_id:0,account_type:"bank",bank_name:"",realname:"",account_no:""}),E=t((()=>({realname:{type:"string",required:!0,message:"bank"==B.account_type?P("bankRealnamePlaceholder"):P("alipayRealnamePlaceholder"),trigger:["blur","change"]},bank_name:{type:"string",required:"bank"==B.account_type,message:P("bankNamePlaceholder"),trigger:["blur","change"]},account_no:{type:"string",required:!0,message:"bank"==B.account_type?P("bankAccountNoPlaceholder"):P("alipayAccountNoPlaceholder"),trigger:["blur","change"]}})));o((e=>{e.type&&(B.account_type=e.type),e.mode&&(U.value=e.mode),e.id&&(B.account_id=e.id,r({account_id:e.id}).then((e=>{e.data&&Object.keys(B).forEach((a=>{null!=e.data[a]&&(B[a]=e.data[a])}))})))}));const O=()=>{const e=B.account_id?h:y;M.value.validate().then((()=>{w.value||(w.value=!0,e(B).then((e=>{"get"==U.value?x({url:"/app/pages/member/account",param:{type:B.account_type,mode:U.value}}):x({url:"/app/pages/member/apply_cash_out",param:{account_id:e.data.id,type:B.account_type},mode:"redirectTo"})})).catch((()=>{w.value=!1})))}))},W=()=>{g(B.account_id).then((()=>{x({url:"/app/pages/member/account",mode:"redirectTo"})}))};return(e,a)=>{const l=k,t=v(V("u-input"),A),o=v(V("u-form-item"),T),r=v(V("u-form"),C),h=v(V("u-button"),N),y=j,x=v(V("u-modal"),R);return n(),c(l,{style:f(e.themeColor())},{default:d((()=>[u(y,{"scroll-y":"true",class:"w-screen h-screen bg-page"},{default:d((()=>[u(l,{class:"h-[30rpx]"}),u(l,{class:"p-[30rpx] bg-white mx-[32rpx] rounded"},{default:d((()=>["bank"==B.account_type?(n(),s(b,{key:0},[u(l,{class:"text-center text-base font-bold mt-[50rpx]"},{default:d((()=>[m(p(i(P)("addBankCard")),1)])),_:1}),u(l,{class:"text-center text-sm mt-[10rpx]"},{default:d((()=>[m(p(i(P)("addBankCardTips")),1)])),_:1}),u(l,{class:"mt-[50rpx]"},{default:d((()=>[u(r,{labelPosition:"left",model:B,labelWidth:"200rpx",errorType:"toast",rules:i(E),ref_key:"formRef",ref:M},{default:d((()=>[u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(o,{label:i(P)("bankRealname"),prop:"realname","border-bottom":!0},{default:d((()=>[u(t,{modelValue:B.realname,"onUpdate:modelValue":a[0]||(a[0]=e=>B.realname=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:i(P)("bankRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(o,{label:i(P)("bankName"),prop:"bank_name","border-bottom":!0},{default:d((()=>[u(t,{modelValue:B.bank_name,"onUpdate:modelValue":a[1]||(a[1]=e=>B.bank_name=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:i(P)("bankNamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(o,{label:i(P)("bankAccountNo"),prop:"account_no","border-bottom":!0},{default:d((()=>[u(t,{modelValue:B.account_no,"onUpdate:modelValue":a[2]||(a[2]=e=>B.account_no=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:i(P)("bankAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):_("v-if",!0),"alipay"==B.account_type?(n(),s(b,{key:1},[u(l,{class:"text-center text-base font-bold mt-[50rpx]"},{default:d((()=>[m(p(i(P)("addAlipayAccount")),1)])),_:1}),u(l,{class:"text-center text-sm mt-[10rpx]"},{default:d((()=>[m(p(i(P)("addAlipayAccountTips")),1)])),_:1}),u(l,{class:"mt-[50rpx]"},{default:d((()=>[u(r,{labelPosition:"left",model:B,labelWidth:"200rpx",errorType:"toast",rules:i(E),ref_key:"formRef",ref:M},{default:d((()=>[u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(o,{label:i(P)("alipayRealname"),prop:"realname","border-bottom":!0},{default:d((()=>[u(t,{modelValue:B.realname,"onUpdate:modelValue":a[3]||(a[3]=e=>B.realname=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:i(P)("alipayRealnamePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:d((()=>[u(o,{label:i(P)("alipayAccountNo"),prop:"account_no","border-bottom":!0},{default:d((()=>[u(t,{modelValue:B.account_no,"onUpdate:modelValue":a[4]||(a[4]=e=>B.account_no=e),modelModifiers:{trim:!0},border:"none",clearable:"",placeholder:i(P)("alipayAccountNoPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1})])),_:1},8,["model","rules"])])),_:1})],64)):_("v-if",!0),u(l,{class:"mt-[100rpx]"},{default:d((()=>[u(h,{text:i(P)("save"),type:"primary",shape:"circle",loading:w.value,onClick:O},null,8,["text","loading"]),B.account_id?(n(),c(l,{key:0,class:"mt-[30rpx]"},{default:d((()=>[u(h,{text:i(P)("delete"),type:"primary",shape:"circle",plain:!0,loading:w.value,onClick:a[5]||(a[5]=e=>q.value=!0)},null,8,["text","loading"])])),_:1})):_("v-if",!0)])),_:1})])),_:1})])),_:1}),u(x,{show:q.value,content:i(P)("deleteConfirm"),confirmText:i(P)("confirm"),cancelText:i(P)("cancel"),showCancelButton:!0,onConfirm:W,onCancel:a[6]||(a[6]=e=>q.value=!1)},null,8,["show","content","confirmText","cancelText"])])),_:1},8,["style"])}}});export{w as default};
