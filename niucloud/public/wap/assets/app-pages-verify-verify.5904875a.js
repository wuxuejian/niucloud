import{d as e,r as l,j as a,ah as t,a6 as s,R as r,a7 as n,o,c as u,w as d,u as i,O as p,b as f,Q as x,P as c,D as m,E as v,f as _,n as g,a as y,i as b,F as h,g as j,h as k,a0 as w,W as C}from"./index-f0b22e55.js";import{_ as F}from"./u-loading-page.c4f05309.js";import{g as T,a as E,v as I}from"./verify.d2ea4b6d.js";import"./u-loading-icon.c77adce6.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-transition.95f24654.js";const O=e({__name:"verify",setup(e){const O=l(!0);l(null);let R=l("");a((e=>{if(e.code&&(R.value=e.code),e.scene){let l=decodeURIComponent(e.scene);l=l.split("&"),l.length&&l.forEach((e=>{-1!=e.indexOf("code")&&(R.value=e.split("-")[1])}))}})),t((()=>{s()&&(q(),D())}));const q=()=>{T().then((e=>{e.data?O.value=!1:(r({title:"非核销员无此权限",icon:"none"}),setTimeout((()=>{n()}),1e3))}))};let z=l({});const D=()=>{O.value=!0,E(R.value).then((e=>{z.value=e.data,O.value=!1,console.log("verifyInfo.value",z.value)}))};let P=!1;const Q=()=>{if(P)return!1;P=!0,I(R.value).then((e=>{P=!1,setTimeout((()=>{y({url:"/app/pages/verify/index",param:{},mode:"redirectTo"})}),1e3)}))};return(e,l)=>{const a=C,t=b,s=h,r=j(k("u-loading-page"),F);return o(),u(t,{style:g(e.themeColor()),class:"bg-[#f8f8f8] min-h-[100vh] overflow-hidden"},{default:d((()=>[!O.value&&i(z)&&i(z).value?(o(),p(x,{key:0},[f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[(o(!0),p(x,null,c(i(z).value.list,((e,l)=>(o(),u(t,{class:"py-[10rpx] flex",key:l},{default:d((()=>[e.cover?(o(),u(a,{key:0,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:i(w)(e.cover)},null,8,["src"])):(o(),u(a,{key:1,class:"w-[80rpx] h-[80rpx]",mode:"aspectFit",src:i(w)("addon/tourism/tourism/member/hotel.png")},null,8,["src"])),f(t,{class:"flex flex-col flex-1 ml-[10rpx]"},{default:d((()=>[f(t,{class:"multi-hidden leading-[1.2]"},{default:d((()=>[m(v(e.name),1)])),_:2},1024),f(t,{class:"ml-auto text-[#999]"},{default:d((()=>[m("x"+v(e.num),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),f(t,{class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m("核销信息")])),_:1}),f(t,{class:"text-[28rpx]"},{default:d((()=>[f(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m("核销类型")])),_:1}),f(t,null,{default:d((()=>[m(v(i(z).type_name),1)])),_:1})])),_:1}),(o(!0),p(x,null,c(i(z).value.content.fixed,((e,l)=>(o(),u(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between"},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),256))])),_:1})])),_:1}),(o(!0),p(x,null,c(i(z).value.content.diy,((e,l)=>(o(),u(t,{key:l,class:"bg-[#fff] rounded-[16rpx] mt-[20rpx] mx-[20rpx] px-[20rpx] py-[30rpx]"},{default:d((()=>[f(t,{class:"border-0 border-b-[2rpx] leading-[1] pb-[20rpx] border-[#ccc] border-solid"},{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,{class:"text-[28rpx]"},{default:d((()=>[(o(!0),p(x,null,c(e.list,((e,l)=>(o(),u(t,{class:"flex items-center leading-[1] mt-[30rpx] justify-between",key:l},{default:d((()=>[f(s,null,{default:d((()=>[m(v(e.title),1)])),_:2},1024),f(t,null,{default:d((()=>[m(v(e.value),1)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128)),f(s,{class:"bg-[var(--primary-color)] text-[#fff] mx-[20rpx] mt-[60rpx] h-[80rpx] flex items-center justify-center !text-[28rpx] rounded-[10rpx]",onClick:Q},{default:d((()=>[m("核销")])),_:1})],64)):_("v-if",!0),f(r,{loading:O.value,"loading-text":"",loadingColor:"var(--primary-color)",iconSize:"35"},null,8,["loading"])])),_:1},8,["style"])}}});export{O as default};
