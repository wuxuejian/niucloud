import{d as e,r as a,o as l,b4 as r,c as s,i as t,j as d,w as o,k as u,m as i,n as m,E as n,H as c,I as p,p as b,T as v,L as f,b5 as _,b6 as h,e as g,b7 as x,x as y,q as V,t as j,ae as w}from"./index-1dfccf80.js";import{_ as P}from"./u-input.aeddb0e8.js";import{_ as k,a as C}from"./u-form.e88fb8fd.js";import{_ as E}from"./u-icon.c25483bc.js";import{_ as $}from"./u-switch.4e8507bf.js";import{_ as q}from"./u-button.9b26a552.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.d327f19a.js";import"./u-loading-icon.421800ef.js";const A=e({__name:"location_address_edit",setup(e){const A=a(""),U=a({id:0,name:"",mobile:"",lat:"",lng:"",address:"",address_name:"学府街",full_address:"",is_default:0,area:"",type:"location_address"});l((e=>{e.id&&r(e.id).then((({data:e})=>{e&&(Object.assign(U.value,e),U.value.area=U.value.full_address.replace(U.value.address,"").replace(U.value.address_name,""))})).catch(),A.value=e.type||""}));const T=a(null),M=s((()=>({address:{type:"string",required:!0,message:f("addressError"),trigger:["blur","change"]},name:{type:"string",required:!0,message:f("namePlaceholder"),trigger:["blur","change"]},mobile:[{type:"string",required:!0,message:f("mobilePlaceholder"),trigger:["blur","change"]},{validator(e,a,l){/^1[3-9]\d{9}$/.test(a)?l():l(new Error(f("mobileError")))}}]}))),W=a(!1),z=()=>{if(uni.$u.test.isEmpty(U.value.area))return void v({title:f("selectAddressPlaceholder"),icon:"none"});const e=U.value.id?_:h;T.value.validate().then((()=>{W.value||(W.value=!0,U.value.full_address=`${U.value.area}${U.value.address_name}${U.value.address}`,e(U.value).then((e=>{W.value=!1,setTimeout((()=>{g({url:"/app/pages/member/address",param:{type:A.value}})}),1e3)})).catch((()=>{W.value=!1})))}))},B=()=>{x({success:e=>{e.latitude&&(U.value.lat=e.latitude),e.longitude&&(U.value.lng=e.longitude),e.address&&(U.value.area=e.address),e.name&&(U.value.address_name=e.name)}})};return(e,a)=>{const l=y,r=V(j("u-input"),P),s=V(j("u-form-item"),k),v=V(j("u-icon"),E),_=V(j("u-switch"),$),h=V(j("u-button"),q),g=V(j("u-form"),C),x=w;return t(),d(l,{style:b(e.themeColor())},{default:o((()=>[u(x,{"scroll-y":"true",class:"bg-page h-screen"},{default:o((()=>[i(' <view class="h-[88rpx]">\r\n                    <u-navbar title="添加地址" @rightClick="rightClick" :autoBack="true"></u-navbar>\r\n            </view> '),u(l,{class:"h-[30rpx]"}),u(l,{class:"m-[30rpx] mt-0 p-[30rpx] pt-[10rpx] rounded-md bg-white"},{default:o((()=>[u(g,{labelPosition:"left",model:U.value,labelWidth:"200rpx",errorType:"toast",rules:m(M),ref_key:"formRef",ref:T},{default:o((()=>[u(l,{class:"mt-[10rpx]"},{default:o((()=>[u(s,{label:m(f)("name"),prop:"name","border-bottom":!0},{default:o((()=>[u(r,{modelValue:U.value.name,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value.name=e),modelModifiers:{trim:!0},border:"none",clearable:"",maxlength:"25",placeholder:m(f)("namePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:o((()=>[u(s,{label:m(f)("mobile"),prop:"mobile","border-bottom":!0},{default:o((()=>[u(r,{modelValue:U.value.mobile,"onUpdate:modelValue":a[1]||(a[1]=e=>U.value.mobile=e),border:"none",clearable:"",placeholder:m(f)("mobilePlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:o((()=>[u(s,{label:m(f)("deliveryAddress"),prop:"address_name","border-bottom":!0},{default:o((()=>[u(l,{class:"flex justify-between flex-1",onClick:B},{default:o((()=>[u(l,{class:n(["text-[15px]",{"text-[#303133]":U.value.area,"text-[#c3c4d5]":!U.value.area}])},{default:o((()=>[c(p(U.value.area?U.value.address_name:m(f)("selectAddressPlaceholder")),1)])),_:1},8,["class"]),u(v,{name:"arrow-right",color:"#c3c4d5"})])),_:1})])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:o((()=>[u(s,{label:m(f)("address"),prop:"address","border-bottom":!0},{default:o((()=>[u(r,{modelValue:U.value.address,"onUpdate:modelValue":a[2]||(a[2]=e=>U.value.address=e),modelModifiers:{trim:!0},border:"none",clearable:"",maxlength:"120",placeholder:m(f)("addressPlaceholder")},null,8,["modelValue","placeholder"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[10rpx]"},{default:o((()=>[u(s,{label:m(f)("defaultAddress"),prop:"name","border-bottom":!0},{default:o((()=>[u(_,{modelValue:U.value.is_default,"onUpdate:modelValue":a[3]||(a[3]=e=>U.value.is_default=e),size:"20",activeValue:1,inactiveValue:0},null,8,["modelValue"])])),_:1},8,["label"])])),_:1}),u(l,{class:"mt-[40rpx]"},{default:o((()=>[u(h,{type:"primary",shape:"circle",text:m(f)("save"),onClick:z,loading:W.value},null,8,["text","loading"])])),_:1})])),_:1},8,["model","rules"])])),_:1})])),_:1})])),_:1},8,["style"])}}});export{A as default};
