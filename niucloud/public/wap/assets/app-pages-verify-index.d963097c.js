import{d as e,r as a,ai as r,R as t,S as s,a4 as l,a5 as x,a as n,o as p,c,w as o,b as i,u,E as f,e as d,v as m,B as g,f as v,n as h,aE as _,bQ as y,_ as b,G as w,i as j,ac as C,g as k,h as V,l as I}from"./index-ead89f89.js";import{_ as z}from"./u-loading-page.d6885d85.js";import{g as E,a as S}from"./verify.e1886beb.js";import{_ as F}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.e01aee7d.js";import"./u-transition.cd578ac5.js";const Q=F(e({__name:"index",setup(e){const F=a("manualInput");F.value="manualInput";const Q=a(!1),R=a(""),Z=a(!0);r((()=>{t()&&A()}));const A=()=>{E().then((e=>{e.data?Z.value=!1:(s({title:"非核销员无此权限",icon:"none"}),setTimeout((()=>{l().length>1?x({delta:1}):n({url:"/app/pages/member/index",mode:"reLaunch"})}),1e3))}))},B=()=>{_()&&(y.init(),y.scanQRCode((e=>{if(e.resultStr){let a=e.resultStr;n({url:"/app/pages/verify/verify",param:{code:a}})}})))};let D=!1;const G=()=>/[\S]+/.test(R.value)?!D&&(D=!0,void S(R.value).then((e=>{D=!1,n({url:"/app/pages/verify/verify",param:{code:R.value}})})).catch((()=>{D=!1}))):(s({title:"请输入核销码",icon:"none"}),!1),H=()=>{Q.value=!Q.value},L=e=>{"sweepCode"!=e||_()?F.value=e:s({title:"H5端不支持扫码核销",icon:"none"})};return(e,a)=>{const r=b,t=w,s=j,l=C,x=k(V("u-loading-page"),z);return p(),c(s,{style:h(e.themeColor())},{default:o((()=>[Z.value?v("v-if",!0):(p(),c(s,{key:0,class:"w-[100vw] min-h-[100vh] bg-[#f8f8f8]"},{default:o((()=>[i(s,{class:"w-full bg-[#fff] verify-box h-[760rpx]"},{default:o((()=>[i(s,{class:"text-[var(--primary-color)] fixed top-[40rpx] right-[30rpx] flex items-center",onClick:a[0]||(a[0]=e=>u(n)({url:"/app/pages/verify/record"}))},{default:o((()=>[i(r,{class:"w-[26rpx] h-[28rpx]",src:u(I)("static/resource/images/verify/history.png")},null,8,["src"]),i(t,{class:"text-[26rpx] ml-[10rpx]"},{default:o((()=>[f("核销记录")])),_:1})])),_:1}),d(i(s,{class:"flex flex-col items-center justify-center"},{default:o((()=>[i(s,{class:"sweep-code flex items-center justify-center",onClick:B},{default:o((()=>[i(r,{class:"w-[354rpx] h-[354rpx]",src:u(I)("static/resource/images/verify/saoma.png")},null,8,["src"])])),_:1}),i(s,{class:"mt-[40rpx] text-[32rpx]"},{default:o((()=>[f("点击扫描二维码")])),_:1}),i(s,{class:"mt-[20rpx] text-[#8288A2] text-[26rpx] font-400 pb-[142rpx]"},{default:o((()=>[f("扫描二维码进行核销")])),_:1})])),_:1},512),[[m,"sweepCode"==F.value]]),d(i(s,null,{default:o((()=>[i(s,{class:"flex pt-[126rpx] items-center justify-center"},{default:o((()=>[i(s,{class:"flex justify-center items-center flex-col pr-[30rpx] w-[130rpx]"},{default:o((()=>[i(r,{class:"w-[100rpx] h-[100rpx]",src:u(I)("static/resource/images/verify/shuruhexiaoma.png")},null,8,["src"]),i(s,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[12rpx]"},{default:o((()=>[f("验证核销码")])),_:1})])),_:1}),i(r,{class:"w-[74rpx] h-[12rpx] mb-[50rpx]",src:u(I)("static/resource/images/verify/youjiantou.png")},null,8,["src"]),i(s,{class:"flex justify-center items-center flex-col pl-[30rpx] w-[130rpx]"},{default:o((()=>[i(r,{class:"w-[100rpx] h-[100rpx]",src:u(I)("static/resource/images/verify/hexiao1.png")},null,8,["src"]),i(s,{class:"text-[26rpx] h-[36rpx] leading-[36rpx] mt-[12rpx]"},{default:o((()=>[f("核销")])),_:1})])),_:1})])),_:1}),i(s,{class:"mt-[50rpx]"},{default:o((()=>[i(s,{class:"h-[90rpx] border-[2rpx] border-solid border-[#DCE0EF] rounded-[16rpx] box-border p-[20rpx] mx-[60rpx] flex items-center"},{default:o((()=>[i(t,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx text-[44rpx] text-[#EF000C]"}),i(l,{type:"text",placeholder:"请输入核销码",class:"h-[90rpx] border-none text-start ml-[30rpx] text-[28rpx] flex-1","placeholder-class":"_placeholder",modelValue:R.value,"onUpdate:modelValue":a[1]||(a[1]=e=>R.value=e),focus:Q.value,ref:"input"},null,8,["modelValue","focus"])])),_:1}),i(s,{class:"h-[88rpx] min-w-[630rpx] text-[#fff] flex items-center justify-center !text-[32rpx] save-btn rounded-[50rpx] h-[88rpx] mx-[60rpx] mt-[146rpx] relative z-1",onClick:G},{default:o((()=>[f("确认")])),_:1})])),_:1})])),_:1},512),[[m,"manualInput"==F.value]])])),_:1}),i(s,{class:"w-[630rpx] h-[100rpx] bg-[#fff] mx-[auto] mt-[220rpx] rounded-[90rpx] flex relative action-type-wrap"},{default:o((()=>[i(s,{class:g(["relative w-[51%] pr-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong1:"sweepCode"==F.value}]),onClick:a[2]||(a[2]=e=>L("sweepCode"))},{default:o((()=>[i(t,{class:"nc-iconfont nc-icon-saoyisaoV6xx !text-[40rpx]"}),i(s,{class:"text-[24rpx] leading-[1] mt-[10rpx]"},{default:o((()=>[f("扫码核销")])),_:1})])),_:1},8,["class"]),i(s,{class:"flex flex-col items-center flex-col w-[120rpx] h-[120rpx] bg-[#FF7354] rounded-[50%] absolute top-[-10rpx] left-[255rpx] heXiao text-white z-10 shrink-0"},{default:o((()=>[i(s,{class:"nc-iconfont nc-icon-saotiaoxingmaV6xx ns-gradient-otherpages-member-balance-balance-rechange !text-[44rpx] mt-[19rpx]"}),i(s,{class:"text-[24rpx] mt-[8rpx] leading-[34rpx] h-[34rpx]"},{default:o((()=>[f("核销台")])),_:1})])),_:1}),i(s,{class:g(["relative w-[51%] pl-[50rpx] box-border rounded-[50rpx] z-0 flex flex-col items-center justify-center",{xuanZhong:"manualInput"==F.value}]),onClick:a[3]||(a[3]=e=>L("manualInput"))},{default:o((()=>[i(t,{class:"iconfont iconVector-77 !text-[40rpx]"}),i(s,{class:"ml-[20rpx] text-[24rpx] leading-[1] mt-[10rpx]",onClick:H},{default:o((()=>[f("手动输入")])),_:1})])),_:1},8,["class"])])),_:1})])),_:1})),i(x,{loading:Z.value,"loading-text":"",loadingColor:"var(--primary-color)",iconSize:"35"},null,8,["loading"])])),_:1},8,["style"])}}}),[["__scopeId","data-v-aecfce48"]]);export{Q as default};
