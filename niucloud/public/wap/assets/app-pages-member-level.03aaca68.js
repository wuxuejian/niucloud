import{_ as e}from"./u-loading-page.c4f05309.js";import{d as t,G as l,r,ah as a,a6 as s,H as x,ai as n,aj as o,ak as f,o as c,c as i,w as p,b as u,u as d,f as _,O as g,P as h,Q as m,D as v,n as b,g as w,h as y,i as k,F as j,W as C,al as F,a0 as A,A as D,E as B,a as E,am as z,an as O}from"./index-f0b22e55.js";import{_ as T}from"./u-empty.da35837f.js";import{_ as G}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.c77adce6.js";import"./u-transition.95f24654.js";import"./u-icon.e73c62d6.js";const H=G(t({__name:"level",setup(t){const G=l();let H=r(!1),I=r([]),P=r([]);const Q=r(0);let S=r(!0);r({title:"会员等级",topStatusBar:{style:"style-1",bgColor:"transparent",textColor:"#fff"}}),a((()=>{s()&&(K(),J())}));const V=x((()=>G.info));let W=e=>{let t=e,l=100;return I.value[t]&&I.value[t].growth&&(l=V.value.growth/I.value[t].growth*100),l},q=e=>{let t=e,l=0;return I.value[t]&&I.value[t].growth&&(l=I.value[t].growth-V.value.growth),l};const J=()=>{H.value=!0,n().then((e=>{I.value=e.data||[];let t=!0;V.value&&I.value&&I.value.length&&I.value.forEach(((e,l)=>{e.level_id==V.value.member_level&&(t=!1,Q.value=l,N(l))})),t&&N(0),H.value=!1})).catch((()=>{H.value=!1}))},K=()=>{o().then((e=>{P.value=e.data}))},L=e=>{Q.value=e.detail.current,N(e.detail.current)};let M=r({}),N=e=>{let t={};if(t=f(I.value[e]),t&&t.level_benefits&&(t.benefits_arr=[],Object.values(t.level_benefits).forEach(((e,l,r)=>{e.content&&t.benefits_arr.push(e.content)}))),t&&t.level_gifts){t.gifts_arr=[];for(let e in t.level_gifts)t.level_gifts[e].content&&(t.level_gifts[e].content.forEach(((t,l,r)=>{r[l].type=e})),t.gifts_arr=t.gifts_arr.concat(t.level_gifts[e].content))}M.value=t};return(t,l)=>{const r=w(y("u-loading-page"),e),a=k,s=j,x=z,n=C,o=O,f=F,G=w(y("u-empty"),T);return c(),i(a,{style:b(t.themeColor())},{default:p((()=>[u(r,{loading:d(H)&&d(V),loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),!d(H)&&d(V)&&d(I)&&d(I).length?(c(),i(a,{key:0,class:"bg-[#2f3a58] min-h-[100vh] overflow-hidden flex flex-col"},{default:p((()=>[u(a,{class:"pb-[36rpx]"},{default:p((()=>[u(a,{class:"pt-[40rpx] pb-[70rpx]"},{default:p((()=>[_(" 轮播图 "),u(a,{class:"relative mx-[20rpx]"},{default:p((()=>[u(f,{class:"swiper ns-indicator-dots",style:{height:"340rpx"},onChange:L,"indicator-color":"rgb(139,139,139)","indicator-active-color":"#fff",current:Q.value,"indicator-dots":d(S),"previous-margin":"40rpx","next-margin":"40rpx"},{default:p((()=>[(c(!0),g(m,null,h(d(I),((e,t)=>(c(),i(o,{class:"swiper-item",key:e.id},{default:p((()=>[u(a,{class:"h-[340rpx] relative"},{default:p((()=>[d(V).member_level==e.level_id&&Q.value==t?(c(),i(a,{key:0,class:"text-[24rpx] absolute top-[42rpx] left-0 z-10 h-[38rpx] !bg-contain w-[144rpx] text-[#fff] flex items-center justify-center",style:b({background:"url("+d(A)("addon/shop/level/carousel_bg_02.png")+") no-repeat"})},{default:p((()=>[v(" 当前等级 ")])),_:1},8,["style"])):_("v-if",!0),u(a,{class:D(["absolute left-0 right-0 z-10 px-[40rpx]",{"pt-[108rpx]":d(V).member_level==e.level_id,"pt-[90rpx]":d(V).member_level!=e.level_id}])},{default:p((()=>[u(a,{class:"flex items-end"},{default:p((()=>[u(a,{class:"flex items-center mb-[-4rpx] mr-[6rpx]"},{default:p((()=>[u(s,{class:"text-[60rpx] skewed-text-10"},{default:p((()=>[v("V")])),_:1}),u(s,{class:"text-[60rpx] skewed-text-10"},{default:p((()=>[v(B(t+1),1)])),_:2},1024)])),_:2},1024),u(s,{class:"text-[32rpx] text-[#3C2913]"},{default:p((()=>[v(B(e.level_name),1)])),_:2},1024)])),_:2},1024),u(a,{class:"text-[#977B48] text-[26rpx] mt-[20rpx]"},{default:p((()=>[v("成长值已达到 "+B(d(V).growth),1)])),_:1}),u(a,{class:"flex justify-between items-center mt-[50rpx]"},{default:p((()=>[u(a,{class:"flex flex-col flex-1"},{default:p((()=>[u(a,null,{default:p((()=>[u(x,{percent:d(W)(t),"border-radius":100,activeColor:"#DB9400",backgroundColor:"#D9D9D9","stroke-width":"6"},null,8,["percent"])])),_:2},1024),d(q)(t)>0?(c(),i(a,{key:0,class:"text-[#977B48] mt-[10rpx] text-[24rpx]"},{default:p((()=>[v("还需要"+B(d(q)(t))+"点成长值升级",1)])),_:2},1024)):_("v-if",!0),d(q)(d(I).length-1)<=0&&d(I).length-1==t?(c(),i(a,{key:1,class:"text-[#977B48] mt-[10rpx] text-[24rpx]"},{default:p((()=>[v("恭喜您升级到最高等级")])),_:1})):_("v-if",!0)])),_:2},1024),d(q)(t)>0?(c(),i(s,{key:0,class:"flex justify-center items-center ml-[90rpx] text-[30rpx] rounded-[50rpx] w-[180rpx] h-[60rpx] text-[#fff] bg-[#3A3842]"},{default:p((()=>[v("加速升级")])),_:1})):_("v-if",!0)])),_:2},1024)])),_:2},1032,["class"]),u(a,{class:"relatvie h-full w-full"},{default:p((()=>[u(n,{class:D(["h-full w-full",{"swiper-animation":Q.value!=t}]),src:d(A)(e.level_bg),mode:"aspectFit","show-menu-by-longpress":!0},null,8,["src","class"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current","indicator-dots"])])),_:1})])),_:1}),d(M).benefits_arr&&d(M).benefits_arr.length?(c(),i(a,{key:0,class:"flex px-[58rpx] items-center flex-col"},{default:p((()=>[u(a,{class:"flex items-center justify-center"},{default:p((()=>[u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_left_01.png"),mode:"heightFix"},null,8,["src"]),u(s,{class:"mx-[30rpx] text-[#FACC80] text-[32rpx] font-bold"},{default:p((()=>[v("会员权益")])),_:1}),u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_right_01.png"),mode:"heightFix"},null,8,["src"])])),_:1}),u(a,{class:"flex flex-wrap w-full mt-[46rpx]"},{default:p((()=>[(c(!0),g(m,null,h(d(M).benefits_arr,((e,t)=>(c(),i(a,{class:"flex flex-col w-[25%] items-center",key:t},{default:p((()=>[u(n,{class:"h-[100rpx] w-[100rpx]",src:d(A)(e.icon),mode:"heightFix"},null,8,["src"]),u(s,{class:"bg-[#2f3a58] -mt-[18rpx] text-[#FACC80] text-[20rpx] flex items-center h-[36rpx] px-[16rpx] rounded-full border-[2rpx] border-solid border-[#FACC80]"},{default:p((()=>[v(B(e.desc),1)])),_:2},1024),u(s,{class:"text-[rgba(255,255,255,0.9)] mt-[10rpx] text-[24rpx]"},{default:p((()=>[v(B(e.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})):_("v-if",!0)])),_:1}),u(a,{class:"bg-[#fff] flex-1 rounded-t-[16rpx] px-[30rpx] pt-[30rpx] tab-bar"},{default:p((()=>[_(" 升级礼包 "),d(M).gifts_arr&&d(M).gifts_arr.length?(c(),i(a,{key:0},{default:p((()=>[u(a,{class:"pt-[10rpx] pb-[40rpx] flex items-center justify-center"},{default:p((()=>[u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_left_02.png"),mode:"heightFix"},null,8,["src"]),u(s,{class:"mx-[30rpx] text-[32rpx] text-[#3A3945] font-bold"},{default:p((()=>[v("升级礼包")])),_:1}),u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_right_02.png"),mode:"heightFix"},null,8,["src"])])),_:1}),u(a,{class:"flex flex-wrap"},{default:p((()=>[(c(!0),g(m,null,h(d(M).gifts_arr,((e,l)=>(c(),i(a,{key:t.idnex,class:D(["relative box-border mb-[40rpx] leading-1 bg-[#FFEAD3] w-[216rpx] h-[220rpx] px-[30rpx] pb-[20rpx] pt-[46rpx] relative rounded-[16rpx] !bg-contain",{"mr-[20rpx]":(l+1)%3!=0}]),style:b({background:"url("+d(A)(e.background)+") no-repeat"})},{default:p((()=>[u(s,{class:"absolute left-0 right-0 text-[rgba(58,57,69,0.8)] bottom-[34rpx] text-center text-[24rpx] font-bold z-10"},{default:p((()=>[v(B(e.text),1)])),_:2},1024)])),_:2},1032,["class","style"])))),128))])),_:1})])),_:1})):_("v-if",!0),_(" 升级技巧 "),d(P)&&d(P).length?(c(),i(a,{key:1},{default:p((()=>[u(a,{class:"pt-[10rpx] pb-[40rpx] flex items-center justify-center"},{default:p((()=>[u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_left_02.png"),mode:"heightFix"},null,8,["src"]),u(s,{class:"mx-[30rpx] text-[32rpx] text-[#3A3945] font-bold"},{default:p((()=>[v("升级技巧")])),_:1}),u(n,{class:"h-[24rpx]",src:d(A)("addon/shop/level/arrows_right_02.png"),mode:"heightFix"},null,8,["src"])])),_:1}),u(a,null,{default:p((()=>[(c(!0),g(m,null,h(d(P),((e,t)=>(c(),i(a,{class:"flex items-center mb-[30rpx]",key:t},{default:p((()=>[u(n,{class:"h-[100rpx] w-[100rpx] mr-[20rpx]",src:d(A)(e.icon),mode:"heightFix"},null,8,["src"]),u(a,{class:"flex flex-col"},{default:p((()=>[u(a,{class:"text-[#3A3945] text-[28rpx] font-bold mb-[12rpx]"},{default:p((()=>[v(B(e.title),1)])),_:2},1024),u(a,{class:"text-[24rpx] text-[#3A3945]"},{default:p((()=>[v(B(e.desc),1)])),_:2},1024)])),_:2},1024),u(s,{class:"skill-btn",onClick:t=>d(E)({url:e.button.wap_redirect,param:{},mode:"redirectTo"})},{default:p((()=>[v(B(e.button.text),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):_("v-if",!0)])),_:1})])),_:1})):_("v-if",!0),d(H)||d(I)&&d(I).length?_("v-if",!0):(c(),i(G,{key:1,icon:d(A)("static/resource/images/empty.png"),text:"暂无会员等级"},null,8,["icon"]))])),_:1},8,["style"])}}}),[["__scopeId","data-v-0381a507"]]);export{H as default};
