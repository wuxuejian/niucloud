import{d as a,r as e,u as l,a as o,c as t,o as r,b as g,g as p,A as s,e as u,K as i,f as n,s as d,h as m,i as v,j as b,w as c,k as f,l as h,v as x,m as S,n as y,p as C,q as _,t as j,x as B,y as k}from"./index-6f7dfcc0.js";import{_ as $}from"./u-loading-page.007a6425.js";import{d as E,f as w}from"./index.2a51d28c.js";import{_ as M}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.8bd45fe0.js";import"./u-transition.77d401ec.js";import"./u-icon.4a3c5455.js";import"./u-avatar.bc26441f.js";import"./u-popup.1c7e0660.js";import"./u-safe-bottom.fa559bf3.js";import"./u-parse.4d699b43.js";import"./u-tabbar.1b42031e.js";const D=M(a({__name:"index",setup(a){const M=e(!0),D=l(),R=e(0);let I=e(!1);const T=e(0),A=e("DIY_MEMBER_INDEX"),G=e(""),H=o({pageMode:"diy",title:"",global:{},value:[]}),N=t((()=>"decorate"==D.mode?D:H));r((a=>{D.mode=a.mode||"","decorate"==D.mode&&(M.value=!1),T.value=a.id||"",G.value=a.template||""})),g((()=>{"decorate"==D.mode?D.init():p({id:T.value,name:A.value,template:G.value}).then((a=>{let e=a.data;if(e.value){H.pageMode=e.mode,H.title=e.title;let a=JSON.parse(e.value);H.global=a.global,H.value=a.value,H.value.forEach(((a,e)=>{a.pageStyle="",a.pageStartBgColor&&(a.pageStartBgColor&&a.pageEndBgColor?a.pageStyle+=`background:linear-gradient(${a.pageGradientAngle},${a.pageStartBgColor},${a.pageEndBgColor});`:a.pageStyle+="background-color:"+a.pageStartBgColor+";"),a.margin&&(a.pageStyle+="padding-top:"+2*a.margin.top+"rpx;",a.pageStyle+="padding-bottom:"+2*a.margin.bottom+"rpx;",a.pageStyle+="padding-right:"+2*a.margin.both+"rpx;",a.pageStyle+="padding-left:"+2*a.margin.both+"rpx;")})),I.value=H.value.some((a=>a&&a.position&&"top_fixed"==a.position)),s({title:H.title})}else e.page&&u({url:e.page});M.value=!1})),i().getMemberInfo()}));const U=t((()=>{var a="";return N.value.global.pageStartBgColor&&N.value.global.pageEndBgColor?a+=`background:linear-gradient(${N.value.global.pageGradientAngle},${N.value.global.pageStartBgColor},${N.value.global.pageEndBgColor});`:a+="background-color:"+N.value.global.pageStartBgColor+";",a+="min-height:calc(100vh - 50px);",N.value.global.bgUrl&&(a+=`background-image:url('${k(N.value.global.bgUrl)}');`),N.value.global.bgHeightScale&&(a+=`background-size: 100% ${N.value.global.bgHeightScale}%;`),a}));return n((()=>{R.value++,d()})),m((a=>{D.scrollTop=a.scrollTop})),(a,e)=>{const l=_(j("u-loading-page"),$),o=B;return v(),b(o,{style:C(a.themeColor())},{default:c((()=>[f(l,{loading:M.value,loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),h(f(o,null,{default:c((()=>[S(" 自定义模板渲染 "),"fixed"!=y(N).pageMode?(v(),b(o,{key:0,class:"diy-template-wrap bg-index",style:C(y(U))},{default:c((()=>[f(E,{data:y(N),pullDownRefreshCount:R.value},null,8,["data","pullDownRefreshCount"])])),_:1},8,["style"])):S("v-if",!0),S(" 固定模板渲染 "),"fixed"==y(N).pageMode?(v(),b(o,{key:1,class:"fixed-template-wrap"},{default:c((()=>[f(w,{data:y(N),pullDownRefreshCount:R.value},null,8,["data","pullDownRefreshCount"])])),_:1})):S("v-if",!0)])),_:1},512),[[x,!M.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-a476e438"]]);export{D as default};
