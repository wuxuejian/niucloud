import{_ as e}from"./u-loading-page.c4f05309.js";import{l as a,m as t,p as r,q as o,t as l,x as s,g as i,h as n,o as d,c as u,w as c,b as p,n as m,f as y,C as g,W as h,i as f,d as _,a5 as v,r as b,af as x,a as w,B as k,D as S,E as C,u as E,J as I,a9 as L,O as B,Q as j,P as U,a0 as F,R,ae as T,G as $,ag as z,I as H,ah as O,a8 as P,e as N,v as A,F as M}from"./index-f0b22e55.js";import{_ as q}from"./u-button.6c9286f5.js";import{_ as D}from"./u-icon.e73c62d6.js";import{_ as G}from"./u-transition.95f24654.js";import{_ as J}from"./_plugin-vue_export-helper.1b428a4d.js";import{_ as Q}from"./u-popup.d2722f83.js";import{p as W,g as K}from"./pay.9a7cac7d.js";import{w as V}from"./wechat.48f9853d.js";import"./u-loading-icon.c77adce6.js";import"./u-safe-bottom.cdc7d17c.js";const X=J({name:"u-image",mixins:[t,r,{props:{src:{type:String,default:()=>a.image.src},mode:{type:String,default:()=>a.image.mode},width:{type:[String,Number],default:()=>a.image.width},height:{type:[String,Number],default:()=>a.image.height},shape:{type:String,default:()=>a.image.shape},radius:{type:[String,Number],default:()=>a.image.radius},lazyLoad:{type:Boolean,default:()=>a.image.lazyLoad},showMenuByLongpress:{type:Boolean,default:()=>a.image.showMenuByLongpress},loadingIcon:{type:String,default:()=>a.image.loadingIcon},errorIcon:{type:String,default:()=>a.image.errorIcon},showLoading:{type:Boolean,default:()=>a.image.showLoading},showError:{type:Boolean,default:()=>a.image.showError},fade:{type:Boolean,default:()=>a.image.fade},webp:{type:Boolean,default:()=>a.image.webp},duration:{type:[String,Number],default:()=>a.image.duration},bgColor:{type:String,default:()=>a.image.bgColor}}}],data(){return{isError:!1,loading:!0,opacity:1,durationTime:this.duration,backgroundStyle:{},show:!1}},watch:{src:{immediate:!0,handler(e){e?(this.isError=!1,this.loading=!0):this.isError=!0}}},computed:{wrapStyle(){let e={};return e.width=o(this.width),e.height=o(this.height),e.borderRadius="circle"==this.shape?"10000px":o(this.radius),e.overflow=this.radius>0?"hidden":"visible",l(e,s(this.customStyle))}},mounted(){this.show=!0},emits:["click","error","load"],methods:{addUnit:o,onClick(){this.$emit("click")},onErrorHandler(e){this.loading=!1,this.isError=!0,this.$emit("error",e)},onLoadHandler(e){this.loading=!1,this.isError=!1,this.$emit("load",e),this.removeBgColor()},removeBgColor(){this.backgroundStyle={backgroundColor:"transparent"}}}},[["render",function(e,a,t,r,o,l){const s=h,_=i(n("u-icon"),D),v=f,b=i(n("u-transition"),G);return d(),u(b,{mode:"fade",show:o.show,duration:e.fade?1e3:0},{default:c((()=>[p(v,{class:"u-image",onClick:l.onClick,style:m([l.wrapStyle,o.backgroundStyle])},{default:c((()=>[o.isError?y("v-if",!0):(d(),u(s,{key:0,src:e.src,mode:e.mode,onError:l.onErrorHandler,onLoad:l.onLoadHandler,"show-menu-by-longpress":e.showMenuByLongpress,"lazy-load":e.lazyLoad,class:"u-image__image",style:m({borderRadius:"circle"==e.shape?"10000px":l.addUnit(e.radius),width:l.addUnit(e.width),height:l.addUnit(e.height)})},null,8,["src","mode","onError","onLoad","show-menu-by-longpress","lazy-load","style"])),e.showLoading&&o.loading?(d(),u(v,{key:1,class:"u-image__loading",style:m({borderRadius:"circle"==e.shape?"50%":l.addUnit(e.radius),backgroundColor:this.bgColor,width:l.addUnit(e.width),height:l.addUnit(e.height)})},{default:c((()=>[g(e.$slots,"loading",{},(()=>[p(_,{name:e.loadingIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):y("v-if",!0),e.showError&&o.isError&&!o.loading?(d(),u(v,{key:2,class:"u-image__error",style:m({borderRadius:"circle"==e.shape?"50%":l.addUnit(e.radius),width:l.addUnit(e.width),height:l.addUnit(e.height)})},{default:c((()=>[g(e.$slots,"error",{},(()=>[p(_,{name:e.errorIcon,width:e.width,height:e.height},null,8,["name","width","height"])]),!0)])),_:3},8,["style"])):y("v-if",!0)])),_:3},8,["onClick","style"])])),_:3},8,["show","duration"])}],["__scopeId","data-v-febc2405"]]),Y=J(_({__name:"pay",emits:["close"],setup(e,{expose:a,emit:t}){v()&&V.init();const r=b(!1),o=b(!1),l=b(null),s=b(""),m=()=>{var e,a;uni.$u.test.isEmpty(s.value)?R({title:I("pay.notHavePayType"),icon:"none"}):o.value||(o.value=!0,W({trade_type:null==(e=l.value)?void 0:e.trade_type,trade_id:null==(a=l.value)?void 0:a.trade_id,type:s.value}).then((e=>{var a,t,r,i,n,d;switch(s.value){case"wechatpay":v()?(e.data.timestamp=e.data.timeStamp,delete e.data.timeStamp,V.pay({...e.data,success:()=>{g()},cancel:()=>{o.value=!1}})):(uni.setStorageSync("paymenting",{trade_type:null==(a=l.value)?void 0:a.trade_type,trade_id:null==(t=l.value)?void 0:t.trade_id}),location.href=e.data.h5_url);break;case"alipay":v()?w({url:"/app/pages/pay/browser",param:{trade_type:null==(r=l.value)?void 0:r.trade_type,trade_id:null==(i=l.value)?void 0:i.trade_id,alipay:encodeURIComponent(e.data.url)},mode:"redirectTo"}):(uni.setStorageSync("paymenting",{trade_type:null==(n=l.value)?void 0:n.trade_type,trade_id:null==(d=l.value)?void 0:d.trade_id}),location.href=e.data.url);break;default:g()}})).catch((()=>{o.value=!1})))};x("checkIsReturnAfterPayment",(()=>{const e=uni.getStorageSync("paymenting");uni.getStorageSync("paymenting")&&w({url:"/app/pages/pay/result",param:{trade_type:e.trade_type,trade_id:e.trade_id},mode:"redirectTo",success(){uni.removeStorageSync("paymenting")}})}));const g=()=>{var e,a;w({url:"/app/pages/pay/result",param:{trade_type:null==(e=l.value)?void 0:e.trade_type,trade_id:null==(a=l.value)?void 0:a.trade_id},mode:"redirectTo"})},h=()=>{uni.removeStorageSync("paymenting"),r.value=!1,t("close")};return a({open:(e,a,t="")=>{uni.setStorageSync("payReturn",encodeURIComponent(t)),K(e,a).then((e=>{let{data:a}=e;l.value=a,uni.$u.test.isEmpty(a)?R({title:I("pay.notObtainedInfo"),icon:"none"}):0!=a.money?(s.value=a.pay_type_list[0]?a.pay_type_list[0].key:"",r.value=!0):g()})).catch((()=>{}))}}),(e,a)=>{const t=f,g=i(n("u-image"),X),_=i(n("u-icon"),D),v=T,b=i(n("u-button"),q),x=i(n("u-popup"),Q);return d(),u(x,{show:r.value,round:10,onClose:h,closeable:!0,bgColor:"#fff",zIndex:"10081",closeOnClickOverlay:!1},{default:c((()=>[l.value?(d(),u(t,{key:0,class:"flex flex-col h-[75vh]",onTouchmove:a[0]||(a[0]=k((()=>{}),["prevent","stop"]))},{default:c((()=>[p(t,{class:"head"},{default:c((()=>[p(t,{class:"text-center py-[26rpx]"},{default:c((()=>[S(C(E(I)("pay.payTitle")),1)])),_:1}),p(t,{class:"flex items-end justify-center w-full text-xl font-bold py-[20rpx]"},{default:c((()=>[p(t,{class:"text-base mr-[4rpx]"},{default:c((()=>[S(C(E(I)("currency")),1)])),_:1}),S(" "+C(E(L)(l.value.money)),1)])),_:1})])),_:1}),p(v,{"scroll-y":"true",class:"flex-1 pt-[20rpx]"},{default:c((()=>[p(t,{class:"flex text-sm px-[30rpx] py-[20rpx]"},{default:c((()=>[p(t,{class:"text-gray-500"},{default:c((()=>[S(C(E(I)("pay.orderInfo")),1)])),_:1}),p(t,{class:"text-right flex-1 pl-[30rpx] using-hidden"},{default:c((()=>[S(C(l.value.body),1)])),_:1})])),_:1}),p(t,{class:"mx-[30rpx] py-[10rpx] px-[30rpx] bg-white rounded-md bg-page"},{default:c((()=>[l.value.pay_type_list.length?(d(!0),B(j,{key:0},U(l.value.pay_type_list,((e,a)=>(d(),u(t,{class:"pay-item py-[18rpx] flex items-center border-0 border-b border-solid border-[#eee]",key:a,onClick:a=>s.value=e.key},{default:c((()=>[p(g,{src:E(F)(e.icon),width:"50rpx",height:"50rpx"},null,8,["src"]),p(t,{class:"flex-1 px-[20rpx] text-sm font-bold"},{default:c((()=>[S(C(e.name),1)])),_:2},1024),e.key==s.value?(d(),u(_,{key:0,name:"checkbox-mark",color:"var(--primary-color)"})):y("v-if",!0)])),_:2},1032,["onClick"])))),128)):(d(),u(t,{key:1,class:"py-[20rpx] text-center text-sm text-gray-subtitle"},{default:c((()=>[S(C(E(I)("pay.notHavePayType")),1)])),_:1}))])),_:1})])),_:1}),p(t,{class:"p-[30rpx]"},{default:c((()=>[p(b,{type:"primary",loading:o.value,text:E(I)("pay.confirmPay"),shape:"circle",onClick:m},null,8,["loading","text"])])),_:1})])),_:1})):y("v-if",!0)])),_:1},8,["show"])}}}),[["__scopeId","data-v-a4e1ca24"]]),Z=J(_({__name:"balance",setup(a){const t=$(),r=z(),o=H({is_auto_transfer:0,is_auto_verify:0,is_open:0,min:0,rate:0,transfer_type:[]}),l=b(!0);O((()=>{P().then((e=>{for(let a in e.data)o[a]=e.data[a];l.value=!1}))}));const s=()=>{uni.setStorageSync("cashOutAccountType","money"),w({url:"/app/pages/member/apply_cash_out"})};return(a,g)=>{const _=i(n("u-loading-page"),e),v=f,b=h,x=M,k=i(n("u-button"),q),B=i(n("pay"),Y);return d(),u(v,{style:m(a.themeColor())},{default:c((()=>[p(_,{loading:l.value,loadingText:""},null,8,["loading"]),N(p(v,{class:"account-info-wrap"},{default:c((()=>[p(v,{class:"account-info-head",style:m({background:"url("+E(F)("static/resource/images/member/balance_bg.png")+") no-repeat 95% 30% / auto 250rpx, linear-gradient(314deg, #FE7849 0%, #FF1959 100%)"})},{default:c((()=>[p(v,{class:"name"},{default:c((()=>[S(C(E(I)("balanceInfo")),1)])),_:1}),p(v,{class:"content"},{default:c((()=>[p(v,{class:"money"},{default:c((()=>[S(C(E(t).info?E(L)((parseFloat(E(t).info.balance)+parseFloat(E(t).info.money)).toString()):"0.00"),1)])),_:1}),p(v,{class:"text"},{default:c((()=>[S(C(E(I)("accountBalance")),1)])),_:1}),p(v,{class:"money-wrap"},{default:c((()=>[p(v,{class:"money-item",onClick:g[0]||(g[0]=e=>E(w)({url:"/app/pages/member/detailed_account",param:{type:"balance"}}))},{default:c((()=>[p(v,{class:"money"},{default:c((()=>{var e;return[S(C(E(L)(null==(e=E(t).info)?void 0:e.balance)||"0.00"),1)]})),_:1}),p(v,{class:"text leading-none"},{default:c((()=>[S(C(E(I)("balance")),1)])),_:1})])),_:1}),p(v,{class:"money-item",onClick:g[1]||(g[1]=e=>E(w)({url:"/app/pages/member/detailed_account",param:{type:"money"}}))},{default:c((()=>[p(v,{class:"money"},{default:c((()=>{var e;return[S(C(E(L)(null==(e=E(t).info)?void 0:e.money)||"0.00"),1)]})),_:1}),p(v,{class:"text leading-none"},{default:c((()=>[S(C(E(I)("money")),1)])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["style"]),p(v,{class:"account-info-btn"},{default:c((()=>[E(r).siteAddons.includes("recharge")?(d(),u(k,{key:0,type:"primary",shape:"circle",class:"btn",customStyle:{backgroundColor:"#FE4E50",color:"#fff",borderColor:"#FE4E50",width:"calc(100vw - 64rpx)"},onClick:g[2]||(g[2]=e=>E(w)({url:"/addon/recharge/pages/recharge"}))},{default:c((()=>[p(b,{class:"max-w-[36rpx] max-h-[36rpx] mr-1",src:E(F)("static/resource/images/member/reset.png")},null,8,["src"]),p(x,null,{default:c((()=>[S(C(E(I)("recharge")),1)])),_:1})])),_:1},8,["customStyle"])):y("v-if",!0),1==o.is_open?(d(),u(k,{key:1,type:"primary",plain:!0,shape:"circle",class:"btn",customStyle:{backgroundColor:"#fff",color:"#FE4E50",borderColor:"#FE4E50",width:"calc(100vw - 64rpx)"},onClick:s},{default:c((()=>[p(b,{class:"max-w-[36rpx] max-h-[36rpx] mr-1",src:E(F)("static/resource/images/member/withdraw_deposit.png")},null,8,["src"]),p(x,null,{default:c((()=>[S(C(E(I)("cashOut")),1)])),_:1})])),_:1},8,["customStyle"])):y("v-if",!0)])),_:1}),p(B,{ref:"payRef",onClose:g[3]||(g[3]=e=>a.rechargeLoading=!1)},null,512)])),_:1},512),[[A,!l.value]])])),_:1},8,["style"])}}}),[["__scopeId","data-v-d70634ed"]]);export{Z as default};
