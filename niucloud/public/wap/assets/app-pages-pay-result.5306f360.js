import{d as t,r as e,j as a,s,J as l,o,c as u,w as n,b as r,A as c,D as i,E as p,u as m,f as d,n as f,a as x,bC as y,F as _,i as v,g as h,h as j,a9 as g}from"./index-f0b22e55.js";import{_ as b}from"./u-button.6c9286f5.js";import{_ as w}from"./u-loading-icon.c77adce6.js";import{_ as C}from"./u-modal.95552ce7.js";import{g as S}from"./pay.9a7cac7d.js";import"./u-icon.e73c62d6.js";import"./_plugin-vue_export-helper.1b428a4d.js";import"./u-line.3e9a753b.js";import"./u-popup.d2722f83.js";import"./u-transition.95f24654.js";import"./u-safe-bottom.cdc7d17c.js";const T=t({__name:"result",setup(t){const T=e(null),k=e(!1);let F="",z=0,E=0;a((t=>{F=t.trade_type,z=t.trade_id,L()}));const L=()=>{S(F,z).then((t=>{if(!uni.$u.test.isEmpty(t.data)){if(1==t.data.status&&E<5)return k.value=!0,E++,void setTimeout((()=>{L()}),1e3);T.value=t.data,k.value=!1,s({title:2==T.value.status?l("pay.paySuccess"):l("pay.payFail")})}})).catch((()=>{}))},P=()=>{var t;const e=decodeURIComponent(uni.getStorageSync("payReturn"));x(e?{url:e,mode:"reLaunch"}:{url:y(),param:{code:null==(t=T.value)?void 0:t.out_trade_no},mode:"reLaunch"})};return(t,e)=>{const a=_,s=v,x=h(j("u-button"),b),y=h(j("u-loading-icon"),w),S=h(j("u-modal"),C);return o(),u(s,{style:f(t.themeColor())},{default:n((()=>[T.value?(o(),u(s,{key:0,class:"w-screen h-screen flex flex-col items-center"},{default:n((()=>[r(s,{class:"flex-1 flex flex-col items-center w-full pt-[100rpx]"},{default:n((()=>[r(a,{class:c(["iconfont text-2xl",2==T.value.status?"text-primary iconduigou":"iconzhifushibai text-red"])},null,8,["class"]),r(s,{class:"text-sm"},{default:n((()=>[i(p(2==T.value.status?m(l)("pay.paySuccess"):m(l)("pay.payFail")),1)])),_:1}),r(s,{class:"text-xl font-bold pt-[30rpx]"},{default:n((()=>[r(a,{class:"text-base"},{default:n((()=>[i(p(m(l)("currency")),1)])),_:1}),r(a,null,{default:n((()=>[i(p(m(g)(T.value.money)),1)])),_:1})])),_:1})])),_:1}),r(s,{class:"pb-[200rpx] w-[240rpx]"},{default:n((()=>[r(x,{type:"primary",text:2==T.value.status?m(l)("complete"):m(l)("close"),plain:!0,onClick:P},null,8,["text"])])),_:1})])),_:1})):d("v-if",!0),r(S,{show:k.value,showCancelButton:!0,confirmText:m(l)("pay.completePay"),cancelText:m(l)("pay.incompletePay"),onCancel:P},{default:n((()=>[r(s,{class:"py-[20rpx]"},{default:n((()=>[r(y,{text:m(l)("pay.getting"),textSize:"16",mode:"circle",vertical:!0},null,8,["text"])])),_:1})])),_:1},8,["show","confirmText","cancelText"])])),_:1},8,["style"])}}});export{T as default};
