import{_ as e}from"./u-loading-page.41f97929.js";import{d as l,G as t,r as a,af as r,a2 as s,H as n,aj as u,ak as x,al as o,o as i,c as p,w as c,b as f,u as d,n as v,f as _,P as g,Q as m,R as b,D as h,g as y,h as w,i as k,am as j,aa as C,F,a0 as X,A as z,E as A,a as E,X as I,an as N,ao as T}from"./index-000ef0fb.js";import{_ as $}from"./u-empty.cb5854aa.js";import{_ as B}from"./_plugin-vue_export-helper.1b428a4d.js";import"./u-loading-icon.d02ed416.js";import"./u-transition.3ad24640.js";import"./u-icon.f8309613.js";const D=B(l({__name:"level",setup(l){const B=t();let D=a(!1),G=a([]),H=a([]);const O=a(0),P=a(0);a({title:"会员等级",topStatusBar:{style:"style-1",bgColor:"transparent",textColor:"#fff"}}),r((()=>{s()&&(L(),K())}));const Q=n((()=>B.info));let R=e=>{let l=e,t=100;return G.value[l]&&G.value[l].growth&&(t=Q.value.growth/G.value[l].growth*100),t};const S=a(""),q=a(""),J=a(""),K=()=>{D.value=!0,u().then((e=>{G.value=e.data||[];let l=!0;Q.value&&G.value&&G.value.length&&G.value.forEach(((e,t)=>{e.level_id==Q.value.member_level&&(l=!1,O.value=t,P.value=O.value,V(t))})),l&&V(0),G.value&&G.value.length>=5?(S.value="width:115rpx;",q.value="max-width:115rpx;",J.value="width:470rpx;transform: translateX(-235rpx);"):G.value&&4==G.value.length?(S.value="width:144rpx;",q.value="max-width:144rpx;",J.value="width:436rpx;transform: translateX(-218rpx);"):G.value&&3==G.value.length?(S.value="width:192rpx;",q.value="max-width:192rpx;",J.value="width:388rpx;transform: translateX(-194rpx);"):G.value&&2==G.value.length?(S.value="width:289rpx;",q.value="max-width:289rpx;",J.value="width:289rpx;transform: translateX(-144rpx);"):(q.value="max-width:578rpx;",S.value="width:100%;"),D.value=!1})).catch((()=>{D.value=!1}))},L=()=>{x().then((e=>{H.value=e.data}))},M=e=>{O.value=e.detail.current,P.value=O.value,V(e.detail.current)};let U=a({}),V=e=>{let l=o(G.value[e]);if(l&&l.level_benefits&&(l.benefits_arr=[],Object.values(l.level_benefits).forEach(((e,t,a)=>{e.content&&l.benefits_arr.push(e.content)}))),l&&l.level_gifts){l.gifts_arr=[];for(let e in l.level_gifts)l.level_gifts[e].content&&(l.level_gifts[e].content.forEach(((l,t,a)=>{a[t].type=e})),l.gifts_arr=l.gifts_arr.concat(l.level_gifts[e].content))}U.value=l};return(l,t)=>{const a=y(w("u-loading-page"),e),r=k,s=I,n=N,u=T,x=j,o=C,B=F,K=y(w("u-empty"),$);return i(),p(r,{style:v(l.themeColor())},{default:c((()=>[f(a,{loading:d(D)&&d(Q),loadingText:"","bg-color":"#f7f7f7"},null,8,["loading"]),!d(D)&&d(Q)&&d(G)&&d(G).length?(i(),p(r,{key:0,class:"min-h-[100vh] overflow-hidden flex flex-col",style:v({backgroundColor:d(U).level_style.bg_color})},{default:c((()=>[f(r,null,{default:c((()=>[f(r,{class:"pt-[40rpx] mb-[20rpx]"},{default:c((()=>[_(" 轮播图 "),f(r,{class:"relative"},{default:c((()=>[f(x,{class:"swiper ns-indicator-dots relative",style:{height:"300rpx"},onChange:M,current:O.value,"previous-margin":"48rpx","next-margin":"48rpx"},{default:c((()=>[(i(!0),g(b,null,m(d(G),((e,l)=>(i(),p(u,{class:"swiper-item",key:e.id},{default:c((()=>[f(r,{class:"h-[300rpx] relative"},{default:c((()=>[d(Q).member_level==e.level_id&&O.value==l?(i(),p(r,{key:0,class:"text-[24rpx] absolute top-0 left-0 z-10 h-[66rpx] !bg-contain w-[150rpx] flex pt-[12rpx] pl-[16rpx] leadinig-[34rpx] box-border",style:v({background:"url("+d(X)(d(U).level_tag)+") no-repeat",color:d(U).level_style.level_color})},{default:c((()=>[h(" 当前等级 ")])),_:1},8,["style"])):Number(d(Q).growth)<Number(d(U).growth)&&O.value==l?(i(),p(r,{key:1,class:"text-[24rpx] absolute top-0 left-0 z-10 h-[66rpx] !bg-contain w-[150rpx] text-[#999] flex pt-[12rpx] pl-[16rpx] leadinig-[34rpx] box-border",style:v({background:"url("+d(X)("static/resource/images/member/level/not_reach.png")+") no-repeat"})},{default:c((()=>[h(" 未达标 ")])),_:1},8,["style"])):_("v-if",!0),f(r,{class:z(["absolute top-0 left-0 right-0 bottom-0 z-20 px-[30rpx] pt-[76rpx] box-border",{"px-[50rpx]":O.value!=l}])},{default:c((()=>[f(r,{class:"flex items-center leading-[50rpx] mb-[70rpx]"},{default:c((()=>[f(s,{class:"h-[32rpx] w-[34rpx] align-middle",src:d(X)(e.level_icon?e.level_icon:""),mode:"aspectFill"},null,8,["src"]),f(r,{class:"text-[36rpx] font-bold ml-[10rpx] max-w-[340rpx] truncate",style:v({color:d(U).level_style.level_color})},{default:c((()=>[h(A(e.level_name),1)])),_:2},1032,["style"])])),_:2},1024),f(r,{class:"flex items-center",style:v({color:d(U).level_style.level_color})},{default:c((()=>[f(r,{class:"text-[28rpx] font-bold leading-[38rpx]"},{default:c((()=>[h(A(d(Q).growth),1)])),_:1}),f(r,{class:"text-[24rpx] leading-[34rpx]"},{default:c((()=>[h("/"+A(d(G)[l].growth)+"成长值",1)])),_:2},1024)])),_:2},1032,["style"]),f(r,{class:"flex justify-between items-center mt-[10rpx]"},{default:c((()=>[f(r,{class:"flex flex-col flex-1"},{default:c((()=>[f(r,null,{default:c((()=>[f(n,{percent:d(R)(l),"border-radius":100,activeColor:d(U).level_style.level_color,backgroundColor:"#fff","stroke-width":"6"},null,8,["percent","activeColor"])])),_:2},1024)])),_:2},1024)])),_:2},1024)])),_:2},1032,["class"]),f(r,{class:"relatvie h-full w-full"},{default:c((()=>[f(s,{class:z(["h-full w-full",{"swiper-animation":O.value!=l}]),src:d(X)(e.level_bg),mode:"aspectFit","show-menu-by-longpress":!0},null,8,["src","class"])])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1},8,["current"])])),_:1})])),_:1}),f(r,{class:"mb-[30rpx] relative"},{default:c((()=>[f(r,{class:"bg-[#fff] opacity-15 h-[2rpx] w-full absolute top-[15rpx]"}),f(r,{style:v(J.value),class:"bg-[#fff] opacity-60 h-[2rpx] absolute top-[15rpx] z-4 left-[50%]"},null,8,["style"]),f(r,{class:"mx-[86rpx]"},{default:c((()=>[f(o,{"scroll-x":!0,"scroll-with-animation":"","scroll-into-view":"id"+(P.value?P.value-1:0)},{default:c((()=>[f(r,{class:"flex flex-nowrap py-[10rpx]"},{default:c((()=>[(i(!0),g(b,null,m(d(G),((e,l)=>(i(),p(r,{key:e.id,style:v(S.value),class:"flex-shrink-0 flex flex-col items-center justify-center",onClick:e=>(e=>{P.value=e,O.value=e,V(e)})(l),id:"id"+l},{default:c((()=>[f(r,{class:z(["w-[14rpx] h-[14rpx] level-class",{"level-select":P.value==l}])},null,8,["class"]),f(r,{style:v(q.value),class:"text-[24rpx] text-[#aaa] mt-[10rpx] truncate"},{default:c((()=>[h(A(e.level_name),1)])),_:2},1032,["style"])])),_:2},1032,["style","onClick","id"])))),128))])),_:1})])),_:1},8,["scroll-into-view"])])),_:1})])),_:1}),d(U).benefits_arr&&d(U).benefits_arr.length?(i(),p(r,{key:0,class:"flex mx-[30rpx] px-[38rpx] pt-[30rpx] pb-[46rpx] items-center flex-col level_benefits",style:v({backgroundImage:"url("+d(X)(d(U).member_bg)+")"})},{default:c((()=>[f(r,{class:"flex items-center justify-center"},{default:c((()=>[f(B,{class:"text-[#fff] text-[32rpx] font-bold leading-[44rpx]"},{default:c((()=>[h("会员权益")])),_:1})])),_:1}),f(r,{class:"flex flex-wrap w-[690rpx] mt-[40rpx] justify-between"},{default:c((()=>[(i(!0),g(b,null,m(d(U).benefits_arr,((e,l)=>(i(),p(r,{class:"flex flex-col w-[25%] items-center",key:l},{default:c((()=>[f(s,{class:"h-[100rpx] w-[100rpx]",src:d(X)(e.icon),mode:"heightFix"},null,8,["src"]),f(B,{class:"text-[rgba(255,255,255,0.9)] mt-[10rpx] text-[24rpx]"},{default:c((()=>[h(A(e.title),1)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1},8,["style"])):_("v-if",!0)])),_:1}),f(r,{class:"flex-1 rounded-t-[40rpx] px-[30rpx] pt-[30rpx] mt-[-16rpx] relative tab-bar",style:v({background:`linear-gradient( 180deg, ${d(U).level_style.gift} 0%, #FFFFFF 20%)`})},{default:c((()=>[_(" 升级礼包 "),d(U).gifts_arr&&d(U).gifts_arr.length?(i(),p(r,{key:0},{default:c((()=>[f(r,{class:"pt-[10rpx] pb-[30rpx] flex items-center"},{default:c((()=>[f(B,{class:"text-[32rpx] text-[#3A3945] font-bold leading-[44rpx]"},{default:c((()=>[h("升级礼包")])),_:1})])),_:1}),f(r,{class:"flex flex-wrap"},{default:c((()=>[(i(!0),g(b,null,m(d(U).gifts_arr,((e,l)=>(i(),p(r,{key:l,class:z(["mb-[20rpx]",{"mr-[20rpx]":(l+1)%3!=0}])},{default:c((()=>[f(r,{class:"relative box-border mb-[12rpx] w-[216rpx] h-[180rpx] !bg-contain",style:v({background:"url("+d(X)(e.background)+") no-repeat"})},null,8,["style"]),f(r,{class:"text-center text-[#333] text-[28rpx] font-500 truncate leading-[40rpx] max-w-[216rpx]"},{default:c((()=>[h(A(e.text),1)])),_:2},1024)])),_:2},1032,["class"])))),128))])),_:1})])),_:1})):_("v-if",!0),_(" 升级技巧 "),d(H)&&d(H).length?(i(),p(r,{key:1},{default:c((()=>[f(r,{class:"pt-[10rpx] pb-[30rpx] flex items-center"},{default:c((()=>[f(B,{class:"text-[32rpx] text-[#333] font-bold leading-[44rpx]"},{default:c((()=>[h("升级技巧")])),_:1})])),_:1}),f(r,null,{default:c((()=>[(i(!0),g(b,null,m(d(H),((e,l)=>(i(),p(r,{class:"flex items-center mb-[30rpx]",key:l},{default:c((()=>[f(s,{class:"h-[100rpx] w-[100rpx] mr-[20rpx]",src:d(X)(e.icon),mode:"heightFix"},null,8,["src"]),f(r,{class:"flex flex-col"},{default:c((()=>[f(r,{class:"text-[#3A3945] text-[28rpx] font-bold leading-[38rpx] mb-[8rpx]"},{default:c((()=>[h(A(e.title),1)])),_:2},1024),f(r,{class:"text-[24rpx] text-[#3A3945] leading-[34rpx]"},{default:c((()=>[h(A(e.desc),1)])),_:2},1024)])),_:2},1024),f(B,{class:"skill-btn",onClick:l=>d(E)({url:e.button.wap_redirect,param:{},mode:"redirectTo"})},{default:c((()=>[h(A(e.button.text),1)])),_:2},1032,["onClick"])])),_:2},1024)))),128))])),_:1})])),_:1})):_("v-if",!0)])),_:1},8,["style"])])),_:1},8,["style"])):_("v-if",!0),d(D)||d(G)||d(G).length?_("v-if",!0):(i(),p(K,{key:1,icon:d(X)("static/resource/images/empty.png"),text:"暂无会员等级"},null,8,["icon"]))])),_:1},8,["style"])}}}),[["__scopeId","data-v-3b12f2a8"]]);export{D as default};
